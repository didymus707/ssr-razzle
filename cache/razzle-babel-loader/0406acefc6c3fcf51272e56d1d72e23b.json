{"ast":null,"code":"import _extends from \"/Users/public1/Documents/Projects/ssr-razzle/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"/Users/public1/Documents/Projects/ssr-razzle/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nconst _excluded = [\"isModalOpen\"];\nvar _jsxFileName = \"/Users/public1/Documents/Projects/ssr-razzle/src/app/authenticated-app/integrations/components/WhatsApp.tsx\";\nvar __jsx = React.createElement;\nimport { Box, Stack, Text, Link, Modal, ModalOverlay, ModalContent, ModalCloseButton, List, ListItem, Flex, Input, Icon, Skeleton, useToast, PseudoBox } from '@chakra-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport QRCode from 'qrcode.react';\nimport { SocialIcon, ToastBox, Button } from 'app/components';\nimport { requestAccessUrls } from '../../channels/channels.data';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { connectChannelAcct, resetQrCode, selectWhatsAppQrCode, setChannelName, selectWhatsAppQrCodeStatus, setQrcodeStatus, selectWhatsAppQrError, setQRError, setIsQrErrorModal } from '../../channels';\nimport { ErrorModal } from '../../channels/components';\n\nfunction QrCode({\n  setViewControl,\n  setNewCredentialID,\n  mirrorWhatsApp\n}) {\n  const dispatch = useDispatch();\n  const qrcode = useSelector(selectWhatsAppQrCode);\n  const qrcodeStatus = useSelector(selectWhatsAppQrCodeStatus);\n  useEffect(() => {\n    if (qrcodeStatus === 'connected') {\n      setViewControl('internet');\n      dispatch(resetQrCode());\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [qrcodeStatus]);\n  return __jsx(React.Fragment, null, __jsx(SocialIcon, {\n    size: \"2.5rem\",\n    which: \"whatsapp\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }), __jsx(Text, {\n    color: \"#000\",\n    fontWeight: 500,\n    fontSize: \"1.375rem\",\n    lineHeight: \"1.625rem\",\n    marginTop: \"1.5625rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, \"To use WhatsApp on Simpu:\"), __jsx(Stack, {\n    isInline: true,\n    spacing: \"2rem\",\n    marginTop: \"1.25rem\",\n    marginBottom: \"5rem\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, __jsx(List, {\n    as: \"ol\",\n    fontSize: \"1rem\",\n    styleType: \"decimal\",\n    lineHeight: \"1.5rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, __jsx(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }, \"Open \", __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 18\n    }\n  }, \"WhatsApp\"), \" or \", __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 47\n    }\n  }, \"WhatsApp Business App\"), \" on your Phone\"), __jsx(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, \"Tap \", __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }, \"Menu\"), \" or Settings and select \", __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 62\n    }\n  }, \"WhatsApp Web/ Desktop\")), __jsx(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  }, \"Log out from all devices and click Scan QR Code\"), __jsx(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }, \"Point your phone to this screen to capture code\")), __jsx(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, qrcodeStatus === 'connecting' && !qrcode ? __jsx(Skeleton, {\n    size: \"9.375rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }) : __jsx(QRCode, {\n    level: \"L\",\n    size: 264,\n    value: qrcode,\n    renderAs: \"canvas\",\n    bgColor: \"#ffffff\",\n    fgColor: \"#000000\",\n    includeMargin: false,\n    style: {\n      border: '1px solid black'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }))));\n}\n\nfunction SetUpChannelName({\n  setViewControl,\n  newCredentialID\n}) {\n  const toast = useToast();\n  const dispatch = useDispatch();\n  const {\n    0: platform_name,\n    1: setPlatformName\n  } = useState('');\n  const {\n    0: isSettingName,\n    1: setIsSettingName\n  } = useState(false);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setIsSettingName(true);\n    const response = await dispatch(setChannelName({\n      platform_name,\n      credential_id: newCredentialID\n    }));\n\n    if (setChannelName.fulfilled.match(response)) {\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          status: \"success\",\n          onClose: onClose,\n          message: \"Channel name updated\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 11\n          }\n        })\n      });\n      setViewControl('internet');\n    } else {\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          onClose: onClose,\n          message: \"Error: Failed to set the channel name\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 11\n          }\n        })\n      });\n    }\n\n    setIsSettingName(true);\n  };\n\n  return __jsx(React.Fragment, null, __jsx(SocialIcon, {\n    size: \"2.5rem\",\n    which: \"whatsapp\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }\n  }), __jsx(Text, {\n    color: \"#000\",\n    fontWeight: 500,\n    fontSize: \"1.375rem\",\n    lineHeight: \"1.625rem\",\n    marginTop: \"1.5625rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }\n  }, \"WhatsApp Integration is processing now.\"), __jsx(List, {\n    as: \"ol\",\n    fontSize: \"1rem\",\n    marginTop: \"2rem\",\n    styleType: \"decimal\",\n    lineHeight: \"1.5rem\",\n    marginBottom: \"1.5rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }\n  }, __jsx(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 9\n    }\n  }, \"Keep your phone \", __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 27\n    }\n  }, \"charged\"), \" and \", __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 56\n    }\n  }, \"connected\"), \" to the internet.\"), __jsx(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 9\n    }\n  }, \"Do not use \", __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 22\n    }\n  }, \"WhatsApp Web/Desktop\"), \" simultaneously.\"), __jsx(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 9\n    }\n  }, \"By default, Simpu only syncs your 10 most recent conversations.\")), __jsx(Text, {\n    marginBottom: \".5rem\",\n    color: \"#333\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }\n  }, \"Channel Name\"), __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }\n  }, __jsx(Input, {\n    isRequired: true,\n    border: \"none\",\n    marginBottom: \"2.5rem\",\n    padding: \".625rem 1rem\",\n    backgroundColor: \"#F6F6F6\",\n    placeholder: \"Enter channel name\",\n    value: platform_name,\n    onChange: e => setPlatformName(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 9\n    }\n  }), __jsx(Flex, {\n    justifyContent: \"flex-end\",\n    marginBottom: \"1.875rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    type: \"submit\",\n    variant: \"solid\",\n    textAlign: \"right\",\n    paddingX: \"1.5rem\",\n    variantColor: \"blue\",\n    isLoading: isSettingName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 11\n    }\n  }, \"Next\"))));\n}\n\nfunction Internet({\n  setViewControl\n}) {\n  return __jsx(React.Fragment, null, __jsx(Text, {\n    color: \"#000\",\n    fontWeight: 500,\n    fontSize: \"1.375rem\",\n    lineHeight: \"1.625rem\",\n    marginTop: \"1.5625rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }\n  }, \"Keep your phone connected to Wi-Fi\"), __jsx(Icon, {\n    name: \"wifi\",\n    width: \"8.5rem\",\n    color: \"#bdbdbd\",\n    height: \"6.375rem\",\n    marginY: \"3.25rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }\n  }), __jsx(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 7\n    }\n  }, \"This WhatsApp (Third-Party) integration depends on the internet connection of your phone. Please keep your phone connected to Wi-Fi at all times to avoid disconnection.\"), __jsx(Flex, {\n    justifyContent: \"flex-end\",\n    marginBottom: \"1.875rem\",\n    marginTop: \"1.5rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }\n  }, __jsx(Button, {\n    type: \"submit\",\n    variant: \"solid\",\n    textAlign: \"right\",\n    paddingX: \"1.5rem\",\n    variantColor: \"blue\",\n    onClick: () => setViewControl('warning'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 9\n    }\n  }, \"Next\")));\n}\n\nfunction Warning({\n  onClose\n}) {\n  const history = useHistory();\n\n  const handleClose = () => {\n    onClose();\n    history.push('/s/integrations/whatsapp');\n  };\n\n  return __jsx(React.Fragment, null, __jsx(Text, {\n    color: \"#000\",\n    fontWeight: 500,\n    fontSize: \"1.375rem\",\n    lineHeight: \"1.625rem\",\n    marginTop: \"1.5625rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 7\n    }\n  }, \"Do not use WhatsApp Web/Desktop\"), __jsx(Icon, {\n    name: \"monitor\",\n    width: \"8.5rem\",\n    color: \"#bdbdbd\",\n    height: \"6.375rem\",\n    marginY: \"3.25rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 7\n    }\n  }), __jsx(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }\n  }, \"Since WhatsApp only allows 1 active web session, using WhatsApp Desktop elsewhere will disconnect Simpu. However, the system will reconnect every hour automatically.\"), __jsx(Flex, {\n    justifyContent: \"flex-end\",\n    marginBottom: \"1.875rem\",\n    marginTop: \"1.5rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 7\n    }\n  }, __jsx(Button, {\n    type: \"submit\",\n    variant: \"solid\",\n    textAlign: \"right\",\n    paddingX: \"1.5rem\",\n    variantColor: \"blue\",\n    onClick: () => handleClose(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 9\n    }\n  }, \"Finish\")));\n}\n\nexport function WhatsApp() {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const {\n    0: isModalOpened,\n    1: setIsModalOpened\n  } = useState(false);\n  const {\n    0: newCredentialID,\n    1: setNewCredentialID\n  } = useState('');\n  const {\n    0: viewControl,\n    1: setViewControl\n  } = useState('qr-code');\n\n  const _useSelector = useSelector(selectWhatsAppQrError),\n        {\n    isModalOpen: isErrorModalOpen\n  } = _useSelector,\n        errorDetail = _objectWithoutProperties(_useSelector, _excluded);\n\n  const handleClosed = () => {\n    setIsModalOpened(false);\n    setViewControl('qr-code');\n  };\n\n  const mirrorWhatsApp = async () => {\n    setIsModalOpened(true);\n    dispatch(setQrcodeStatus('connecting'));\n    const r = await dispatch(connectChannelAcct({\n      channel: 'whatsappWeb'\n    }));\n\n    if (!connectChannelAcct.fulfilled.match(r)) {\n      var _r$error;\n\n      if (r !== null && r !== void 0 && (_r$error = r.error) !== null && _r$error !== void 0 && _r$error.message) {\n        setIsModalOpened(false);\n        dispatch(setQRError({\n          message: r.error.message\n        }));\n      }\n    }\n  };\n\n  let view = __jsx(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 14\n    }\n  });\n\n  if (viewControl === 'qr-code') {\n    view = __jsx(QrCode, {\n      mirrorWhatsApp: mirrorWhatsApp,\n      setViewControl: setViewControl,\n      setNewCredentialID: setNewCredentialID,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 7\n      }\n    });\n  } else if (viewControl === 'set_name') {\n    view = __jsx(SetUpChannelName, {\n      setViewControl: setViewControl,\n      newCredentialID: newCredentialID,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 12\n      }\n    });\n  } else if (viewControl === 'internet') {\n    view = __jsx(Internet, {\n      setViewControl: setViewControl,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 12\n      }\n    });\n  } else if (viewControl === 'warning') {\n    view = __jsx(Warning, {\n      onClose: handleClosed,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return __jsx(Box, {\n    backgroundColor: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 5\n    }\n  }, __jsx(Box, {\n    p: \"1rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 7\n    }\n  }, __jsx(Button, {\n    size: \"sm\",\n    variant: \"ghost\",\n    leftIcon: \"chevron-left\",\n    onClick: () => history.goBack(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 9\n    }\n  }, \"Go back to directory\")), __jsx(Stack, {\n    color: \"brandBlack\",\n    alignItems: \"center\",\n    paddingTop: \"3.25rem\",\n    justifyContent: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 7\n    }\n  }, __jsx(Text, {\n    fontSize: \"1.125rem\",\n    fontWeight: 600,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 9\n    }\n  }, \"Choose your preferred setup\"), __jsx(Stack, {\n    isInline: true,\n    spacing: \"1.5rem\",\n    paddingTop: \"3.25rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 9\n    }\n  }, __jsx(PseudoBox, {\n    as: \"button\",\n    padding: \"3rem .8rem\",\n    width: \"17rem\",\n    textAlign: \"center\",\n    borderRadius: \".25rem\",\n    flexDirection: \"column\",\n    display: \"block\",\n    onClick: () => mirrorWhatsApp(),\n    border: \"1px solid rgb(226, 232, 240)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 11\n    }\n  }, __jsx(Icon, {\n    name: \"mirror\",\n    size: \"8rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 13\n    }\n  }), __jsx(Text, {\n    fontSize: \"1rem\",\n    fontWeight: 500,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 13\n    }\n  }, \"Mirror Current WhatsApp\"), __jsx(Text, {\n    fontSize: \".8rem\",\n    marginTop: \".5rem\",\n    textAlign: \"center\",\n    opacity: 0.8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 13\n    }\n  }, \"Use your existing WhatsApp number. Sync your contacts and groups directly into Simpu.\")), __jsx(Link, {\n    isExternal: true,\n    display: \"flex\",\n    padding: \".8rem\",\n    maxWidth: \"17rem\",\n    textAlign: \"center\",\n    alignItems: \"center\",\n    borderRadius: \".25rem\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n    href: requestAccessUrls.whatsapp,\n    border: \"1px solid rgb(226, 232, 240)\",\n    _hover: {\n      textDecoration: 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 11\n    }\n  }, __jsx(Icon, {\n    name: \"request\",\n    size: \"8rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 13\n    }\n  }), __jsx(Text, {\n    fontSize: \"1rem\",\n    fontWeight: 500,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 13\n    }\n  }, \"Setup New WhatsApp Business\"), __jsx(Text, {\n    fontSize: \".8rem\",\n    marginTop: \".5rem\",\n    opacity: 0.8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 13\n    }\n  }, \"Get your personalized WhatsApp for Business Number. Perfect for large enterprises and brands.\")))), __jsx(Modal, {\n    isOpen: isModalOpened,\n    onClose: handleClosed,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 7\n    }\n  }, __jsx(ModalOverlay, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 9\n    }\n  }), __jsx(ModalContent, {\n    width: \"auto\",\n    marginTop: \"5rem\",\n    paddingTop: \"2rem\",\n    paddingX: \"1.875rem\",\n    maxWidth: \"48rem\",\n    borderRadius: \".3125rem\",\n    boxShadow: \"0px 0px 1px rgba(67, 90, 111, 0.47)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 9\n    }\n  }, __jsx(ModalCloseButton, {\n    top: \".625rem\",\n    right: \".625rem\",\n    width: \"1.5rem\",\n    height: \"1.5rem\",\n    color: \"#333333\",\n    padding: \".25rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 11\n    }\n  }), view)), __jsx(ErrorModal, _extends({}, errorDetail, {\n    isOpen: isErrorModalOpen,\n    setIsOpen: value => dispatch(setIsQrErrorModal(value)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 7\n    }\n  })));\n}","map":{"version":3,"sources":["/Users/public1/Documents/Projects/ssr-razzle/src/app/authenticated-app/integrations/components/WhatsApp.tsx"],"names":["Box","Stack","Text","Link","Modal","ModalOverlay","ModalContent","ModalCloseButton","List","ListItem","Flex","Input","Icon","Skeleton","useToast","PseudoBox","React","useEffect","useState","useHistory","QRCode","SocialIcon","ToastBox","Button","requestAccessUrls","useDispatch","useSelector","connectChannelAcct","resetQrCode","selectWhatsAppQrCode","setChannelName","selectWhatsAppQrCodeStatus","setQrcodeStatus","selectWhatsAppQrError","setQRError","setIsQrErrorModal","ErrorModal","QrCode","setViewControl","setNewCredentialID","mirrorWhatsApp","dispatch","qrcode","qrcodeStatus","border","SetUpChannelName","newCredentialID","toast","platform_name","setPlatformName","isSettingName","setIsSettingName","handleSubmit","e","preventDefault","response","credential_id","fulfilled","match","position","render","onClose","target","value","Internet","Warning","history","handleClose","push","WhatsApp","isModalOpened","setIsModalOpened","viewControl","isModalOpen","isErrorModalOpen","errorDetail","handleClosed","r","channel","error","message","view","goBack","whatsapp","textDecoration"],"mappings":"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","sourcesContent":["import {\n  Box,\n  Stack,\n  Text,\n  Link,\n  Modal,\n  ModalOverlay,\n  ModalContent,\n  ModalCloseButton,\n  List,\n  ListItem,\n  Flex,\n  Input,\n  Icon,\n  Skeleton,\n  useToast,\n  PseudoBox,\n} from '@chakra-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport QRCode from 'qrcode.react';\nimport { SocialIcon, ToastBox, Button } from 'app/components';\nimport { requestAccessUrls } from '../../channels/channels.data';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  connectChannelAcct,\n  resetQrCode,\n  selectWhatsAppQrCode,\n  setChannelName,\n  selectWhatsAppQrCodeStatus,\n  setQrcodeStatus,\n  selectWhatsAppQrError,\n  setQRError,\n  setIsQrErrorModal,\n} from '../../channels';\nimport { ErrorModal } from '../../channels/components';\n\ntype ViewControl = 'qr-code' | 'set_name' | 'internet' | 'warning';\ntype QrCodeStatus = 'none' | 'pending' | 'rejected';\ntype CommonProps = {\n  newCredentialID: string;\n  viewControl: ViewControl;\n  setNewCredentialID: (v: string) => void;\n  setViewControl: (v: ViewControl) => void;\n};\n\nfunction QrCode({\n  setViewControl,\n  setNewCredentialID,\n  mirrorWhatsApp,\n}: Pick<CommonProps, 'setViewControl' | 'setNewCredentialID'> & {\n  mirrorWhatsApp: () => void;\n}) {\n  const dispatch = useDispatch();\n\n  const qrcode = useSelector(selectWhatsAppQrCode);\n  const qrcodeStatus = useSelector(selectWhatsAppQrCodeStatus);\n\n  useEffect(() => {\n    if (qrcodeStatus === 'connected') {\n      setViewControl('internet');\n      dispatch(resetQrCode());\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [qrcodeStatus]);\n\n  return (\n    <>\n      <SocialIcon size=\"2.5rem\" which=\"whatsapp\" />\n\n      <Text\n        color=\"#000\"\n        fontWeight={500}\n        fontSize=\"1.375rem\"\n        lineHeight=\"1.625rem\"\n        marginTop=\"1.5625rem\"\n      >\n        To use WhatsApp on Simpu:\n      </Text>\n\n      <Stack\n        isInline\n        spacing=\"2rem\"\n        marginTop=\"1.25rem\"\n        marginBottom=\"5rem\"\n        alignItems=\"center\"\n        justifyContent=\"space-between\"\n      >\n        <List as=\"ol\" fontSize=\"1rem\" styleType=\"decimal\" lineHeight=\"1.5rem\">\n          <ListItem>\n            Open <strong>WhatsApp</strong> or <strong>WhatsApp Business App</strong> on your Phone\n          </ListItem>\n          <ListItem>\n            Tap <strong>Menu</strong> or Settings and select <strong>WhatsApp Web/ Desktop</strong>\n          </ListItem>\n          <ListItem>Log out from all devices and click Scan QR Code</ListItem>\n          <ListItem>Point your phone to this screen to capture code</ListItem>\n        </List>\n\n        <Box>\n          {qrcodeStatus === 'connecting' && !qrcode ? (\n            <Skeleton size=\"9.375rem\" />\n          ) : (\n            <QRCode\n              level=\"L\"\n              size={264}\n              value={qrcode}\n              renderAs=\"canvas\"\n              bgColor=\"#ffffff\"\n              fgColor=\"#000000\"\n              includeMargin={false}\n              style={{ border: '1px solid black' }}\n            />\n          )}\n        </Box>\n      </Stack>\n    </>\n  );\n}\n\nfunction SetUpChannelName({\n  setViewControl,\n  newCredentialID,\n}: Pick<CommonProps, 'setViewControl' | 'newCredentialID'>) {\n  const toast = useToast();\n  const dispatch = useDispatch();\n  const [platform_name, setPlatformName] = useState('');\n  const [isSettingName, setIsSettingName] = useState(false);\n\n  const handleSubmit = async (e: any) => {\n    e.preventDefault();\n    setIsSettingName(true);\n    const response: any = await dispatch(\n      setChannelName({\n        platform_name,\n        credential_id: newCredentialID,\n      }),\n    );\n    if (setChannelName.fulfilled.match(response)) {\n      toast({\n        position: 'bottom-left',\n        render: ({ onClose }) => (\n          <ToastBox status=\"success\" onClose={onClose} message=\"Channel name updated\" />\n        ),\n      });\n      setViewControl('internet');\n    } else {\n      toast({\n        position: 'bottom-left',\n        render: ({ onClose }) => (\n          <ToastBox onClose={onClose} message=\"Error: Failed to set the channel name\" />\n        ),\n      });\n    }\n\n    setIsSettingName(true);\n  };\n\n  return (\n    <>\n      <SocialIcon size=\"2.5rem\" which=\"whatsapp\" />\n\n      <Text\n        color=\"#000\"\n        fontWeight={500}\n        fontSize=\"1.375rem\"\n        lineHeight=\"1.625rem\"\n        marginTop=\"1.5625rem\"\n      >\n        WhatsApp Integration is processing now.\n      </Text>\n\n      <List\n        as=\"ol\"\n        fontSize=\"1rem\"\n        marginTop=\"2rem\"\n        styleType=\"decimal\"\n        lineHeight=\"1.5rem\"\n        marginBottom=\"1.5rem\"\n      >\n        <ListItem>\n          Keep your phone <strong>charged</strong> and <strong>connected</strong> to the internet.\n        </ListItem>\n        <ListItem>\n          Do not use <strong>WhatsApp Web/Desktop</strong> simultaneously.\n        </ListItem>\n        <ListItem>By default, Simpu only syncs your 10 most recent conversations.</ListItem>\n      </List>\n\n      <Text marginBottom=\".5rem\" color=\"#333\">\n        Channel Name\n      </Text>\n\n      <form onSubmit={handleSubmit}>\n        <Input\n          isRequired\n          border=\"none\"\n          marginBottom=\"2.5rem\"\n          padding=\".625rem 1rem\"\n          backgroundColor=\"#F6F6F6\"\n          placeholder=\"Enter channel name\"\n          value={platform_name}\n          onChange={(e: any) => setPlatformName(e.target.value)}\n        />\n\n        <Flex justifyContent=\"flex-end\" marginBottom=\"1.875rem\">\n          <Button\n            type=\"submit\"\n            variant=\"solid\"\n            textAlign=\"right\"\n            paddingX=\"1.5rem\"\n            variantColor=\"blue\"\n            isLoading={isSettingName}\n          >\n            Next\n          </Button>\n        </Flex>\n      </form>\n    </>\n  );\n}\n\nfunction Internet({ setViewControl }: Pick<CommonProps, 'setViewControl'>) {\n  return (\n    <>\n      <Text\n        color=\"#000\"\n        fontWeight={500}\n        fontSize=\"1.375rem\"\n        lineHeight=\"1.625rem\"\n        marginTop=\"1.5625rem\"\n      >\n        Keep your phone connected to Wi-Fi\n      </Text>\n\n      <Icon name=\"wifi\" width=\"8.5rem\" color=\"#bdbdbd\" height=\"6.375rem\" marginY=\"3.25rem\" />\n\n      <Text>\n        This WhatsApp (Third-Party) integration depends on the internet connection of your phone.\n        Please keep your phone connected to Wi-Fi at all times to avoid disconnection.\n      </Text>\n\n      <Flex justifyContent=\"flex-end\" marginBottom=\"1.875rem\" marginTop=\"1.5rem\">\n        <Button\n          type=\"submit\"\n          variant=\"solid\"\n          textAlign=\"right\"\n          paddingX=\"1.5rem\"\n          variantColor=\"blue\"\n          onClick={() => setViewControl('warning')}\n        >\n          Next\n        </Button>\n      </Flex>\n    </>\n  );\n}\n\nfunction Warning({ onClose }: { onClose: () => void }) {\n  const history = useHistory();\n\n  const handleClose = () => {\n    onClose();\n    history.push('/s/integrations/whatsapp');\n  };\n\n  return (\n    <>\n      <Text\n        color=\"#000\"\n        fontWeight={500}\n        fontSize=\"1.375rem\"\n        lineHeight=\"1.625rem\"\n        marginTop=\"1.5625rem\"\n      >\n        Do not use WhatsApp Web/Desktop\n      </Text>\n\n      <Icon name=\"monitor\" width=\"8.5rem\" color=\"#bdbdbd\" height=\"6.375rem\" marginY=\"3.25rem\" />\n\n      <Text>\n        Since WhatsApp only allows 1 active web session, using WhatsApp Desktop elsewhere will\n        disconnect Simpu. However, the system will reconnect every hour automatically.\n      </Text>\n\n      <Flex justifyContent=\"flex-end\" marginBottom=\"1.875rem\" marginTop=\"1.5rem\">\n        <Button\n          type=\"submit\"\n          variant=\"solid\"\n          textAlign=\"right\"\n          paddingX=\"1.5rem\"\n          variantColor=\"blue\"\n          onClick={() => handleClose()}\n        >\n          Finish\n        </Button>\n      </Flex>\n    </>\n  );\n}\n\nexport function WhatsApp() {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const [isModalOpened, setIsModalOpened] = useState(false);\n  const [newCredentialID, setNewCredentialID] = useState('');\n  const [viewControl, setViewControl] = useState<ViewControl>('qr-code');\n\n  const { isModalOpen: isErrorModalOpen, ...errorDetail } = useSelector(selectWhatsAppQrError);\n\n  const handleClosed = () => {\n    setIsModalOpened(false);\n    setViewControl('qr-code');\n  };\n\n  const mirrorWhatsApp = async () => {\n    setIsModalOpened(true);\n    dispatch(setQrcodeStatus('connecting'));\n    const r: any = await dispatch(\n      connectChannelAcct({\n        channel: 'whatsappWeb',\n      }),\n    );\n\n    if (!connectChannelAcct.fulfilled.match(r)) {\n      if (r?.error?.message) {\n        setIsModalOpened(false);\n        dispatch(\n          setQRError({\n            message: r.error.message,\n          }),\n        );\n      }\n    }\n  };\n\n  let view = <Box />;\n  if (viewControl === 'qr-code') {\n    view = (\n      <QrCode\n        mirrorWhatsApp={mirrorWhatsApp}\n        setViewControl={setViewControl}\n        setNewCredentialID={setNewCredentialID}\n      />\n    );\n  } else if (viewControl === 'set_name') {\n    view = <SetUpChannelName setViewControl={setViewControl} newCredentialID={newCredentialID} />;\n  } else if (viewControl === 'internet') {\n    view = <Internet setViewControl={setViewControl} />;\n  } else if (viewControl === 'warning') {\n    view = <Warning onClose={handleClosed} />;\n  }\n\n  return (\n    <Box backgroundColor=\"white\">\n      <Box p=\"1rem\">\n        <Button size=\"sm\" variant=\"ghost\" leftIcon=\"chevron-left\" onClick={() => history.goBack()}>\n          Go back to directory\n        </Button>\n      </Box>\n\n      <Stack color=\"brandBlack\" alignItems=\"center\" paddingTop=\"3.25rem\" justifyContent=\"center\">\n        <Text fontSize=\"1.125rem\" fontWeight={600}>\n          Choose your preferred setup\n        </Text>\n\n        <Stack isInline spacing=\"1.5rem\" paddingTop=\"3.25rem\">\n          <PseudoBox\n            as=\"button\"\n            padding=\"3rem .8rem\"\n            width=\"17rem\"\n            textAlign=\"center\"\n            borderRadius=\".25rem\"\n            flexDirection=\"column\"\n            display=\"block\"\n            onClick={() => mirrorWhatsApp()}\n            border=\"1px solid rgb(226, 232, 240)\"\n          >\n            <Icon name=\"mirror\" size=\"8rem\" />\n            <Text fontSize=\"1rem\" fontWeight={500}>\n              Mirror Current WhatsApp\n            </Text>\n            <Text fontSize=\".8rem\" marginTop=\".5rem\" textAlign=\"center\" opacity={0.8}>\n              Use your existing WhatsApp number. Sync your contacts and groups directly into Simpu.\n            </Text>\n          </PseudoBox>\n\n          <Link\n            isExternal\n            display=\"flex\"\n            padding=\".8rem\"\n            maxWidth=\"17rem\"\n            textAlign=\"center\"\n            alignItems=\"center\"\n            borderRadius=\".25rem\"\n            flexDirection=\"column\"\n            justifyContent=\"center\"\n            href={requestAccessUrls.whatsapp}\n            border=\"1px solid rgb(226, 232, 240)\"\n            _hover={{ textDecoration: 'none' }}\n          >\n            <Icon name=\"request\" size=\"8rem\" />\n            <Text fontSize=\"1rem\" fontWeight={500}>\n              Setup New WhatsApp Business\n            </Text>\n            <Text fontSize=\".8rem\" marginTop=\".5rem\" opacity={0.8}>\n              Get your personalized WhatsApp for Business Number. Perfect for large enterprises and\n              brands.\n            </Text>\n          </Link>\n        </Stack>\n      </Stack>\n\n      <Modal isOpen={isModalOpened} onClose={handleClosed}>\n        <ModalOverlay />\n\n        <ModalContent\n          width=\"auto\"\n          marginTop=\"5rem\"\n          paddingTop=\"2rem\"\n          paddingX=\"1.875rem\"\n          maxWidth=\"48rem\"\n          borderRadius=\".3125rem\"\n          boxShadow=\"0px 0px 1px rgba(67, 90, 111, 0.47)\"\n        >\n          <ModalCloseButton\n            top=\".625rem\"\n            right=\".625rem\"\n            width=\"1.5rem\"\n            height=\"1.5rem\"\n            color=\"#333333\"\n            padding=\".25rem\"\n          />\n\n          {view}\n        </ModalContent>\n      </Modal>\n\n      <ErrorModal\n        {...errorDetail}\n        isOpen={isErrorModalOpen}\n        setIsOpen={value => dispatch(setIsQrErrorModal(value))}\n      />\n    </Box>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}