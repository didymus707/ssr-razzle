{"ast":null,"code":"var _jsxFileName = \"/Users/public1/Documents/Projects/ssr-razzle/src/app/authenticated-app/inbox/settings/EditTag.tsx\";\nvar __jsx = React.createElement;\nimport { Box, Stack, useToast } from '@chakra-ui/core';\nimport { FullPageSpinner, PreTitle, ToastBox } from 'app/components';\nimport React from 'react';\nimport { useMutation, useQuery, useQueryClient } from 'react-query';\nimport { useHistory, useParams } from 'react-router';\nimport { deleteTag, editTag, getTag } from '../inbox.service';\nimport { PageBack, TagForm } from './component';\nexport const InboxSettingsEditTag = () => {\n  const {\n    id\n  } = useParams();\n  const toast = useToast();\n  const history = useHistory();\n  const queryClient = useQueryClient();\n  const {\n    data,\n    isLoading\n  } = useQuery('tag', () => getTag(id));\n\n  const handleGotoTags = () => history.push('/s/inbox/settings/tags');\n\n  const {\n    isLoading: isEditing,\n    mutate\n  } = useMutation(payload => editTag(payload), {\n    onMutate: async payload => {\n      const {\n        id,\n        data\n      } = payload;\n      await queryClient.cancelQueries('tags');\n      const previousTags = queryClient.getQueryData('tags');\n      queryClient.setQueryData('tags', old => {\n        //@ts-ignore\n        return old === null || old === void 0 ? void 0 : old.map(item => {\n          if (item.uuid === id) {\n            return data;\n          }\n\n          return item;\n        });\n      });\n      return {\n        previousTags\n      };\n    },\n    onSuccess: () => {\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          status: \"success\",\n          onClose: onClose,\n          message: \"Tag updated successfully\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 13\n          }\n        })\n      });\n      queryClient.invalidateQueries('tags');\n      handleGotoTags();\n    },\n    onError: (error, newData, context) => {\n      queryClient.setQueryData('tags', context.previousTags);\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          onClose: onClose,\n          message: error.message,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 36\n          }\n        })\n      });\n    }\n  });\n  const {\n    isLoading: isDeleting,\n    mutate: mutateTagDelete\n  } = useMutation(payload => deleteTag(payload), {\n    onMutate: async payload => {\n      await queryClient.cancelQueries('tags');\n      const previousTags = queryClient.getQueryData('tags');\n      queryClient.setQueryData('tags', old => {\n        //@ts-ignore\n        return old === null || old === void 0 ? void 0 : old.filter(item => item.uuid !== payload.uuid);\n      });\n      return {\n        previousTags\n      };\n    },\n    onSuccess: () => {\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          status: \"success\",\n          onClose: onClose,\n          message: \"Tag deleted successfully\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }\n        })\n      });\n      handleGotoTags();\n    },\n    onError: (error, newData, context) => {\n      queryClient.setQueryData('tags', context.previousTags);\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          onClose: onClose,\n          message: error.message,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 36\n          }\n        })\n      });\n    }\n  });\n\n  const handleEditTag = values => {\n    mutate({\n      id: values.uuid,\n      data: values\n    });\n  };\n\n  const handleDeleteTag = () => {\n    mutateTagDelete(data.data.tag);\n  };\n\n  return __jsx(Box, {\n    height: \"100%\",\n    bg: \"white\",\n    overflowY: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }\n  }, __jsx(PageBack, {\n    title: \"Back to Tags\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }), isLoading ? __jsx(FullPageSpinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }) : __jsx(Box, {\n    maxW: \"800px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, __jsx(Stack, {\n    spacing: \"7rem\",\n    flex: 1,\n    isInline: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, __jsx(PreTitle, {\n    color: \"black\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, \"edit tag\"), __jsx(Box, {\n    flex: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, __jsx(TagForm, {\n    isLoading: isEditing,\n    isDeleting: isDeleting,\n    onSubmit: handleEditTag,\n    onCancel: handleGotoTags,\n    onDelete: handleDeleteTag,\n    initialValues: data.data.tag,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  })))));\n};","map":{"version":3,"sources":["/Users/public1/Documents/Projects/ssr-razzle/src/app/authenticated-app/inbox/settings/EditTag.tsx"],"names":["Box","Stack","useToast","FullPageSpinner","PreTitle","ToastBox","React","useMutation","useQuery","useQueryClient","useHistory","useParams","deleteTag","editTag","getTag","PageBack","TagForm","InboxSettingsEditTag","id","toast","history","queryClient","data","isLoading","handleGotoTags","push","isEditing","mutate","payload","onMutate","cancelQueries","previousTags","getQueryData","setQueryData","old","map","item","uuid","onSuccess","position","render","onClose","invalidateQueries","onError","error","newData","context","message","isDeleting","mutateTagDelete","filter","handleEditTag","values","handleDeleteTag","tag"],"mappings":"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","sourcesContent":["import { Box, Stack, useToast } from '@chakra-ui/core';\nimport { FullPageSpinner, PreTitle, ToastBox } from 'app/components';\nimport { AxiosError } from 'axios';\nimport React from 'react';\nimport { useMutation, useQuery, useQueryClient } from 'react-query';\nimport { useHistory, useParams } from 'react-router';\nimport { deleteTag, editTag, getTag } from '../inbox.service';\nimport { InboxTag } from '../inbox.types';\nimport { PageBack, TagForm } from './component';\n\nexport const InboxSettingsEditTag = () => {\n  const { id } = useParams<{ id: string }>();\n\n  const toast = useToast();\n  const history = useHistory();\n  const queryClient = useQueryClient();\n\n  const { data, isLoading } = useQuery('tag', () => getTag(id));\n\n  const handleGotoTags = () => history.push('/s/inbox/settings/tags');\n\n  const { isLoading: isEditing, mutate } = useMutation<any, AxiosError, any, any>(\n    (payload: { id: string; data: InboxTag }) => editTag(payload),\n    {\n      onMutate: async payload => {\n        const { id, data } = payload;\n        await queryClient.cancelQueries('tags');\n        const previousTags = queryClient.getQueryData('tags');\n        queryClient.setQueryData('tags', old => {\n          //@ts-ignore\n          return old?.map(item => {\n            if (item.uuid === id) {\n              return data;\n            }\n            return item;\n          });\n        });\n        return { previousTags };\n      },\n      onSuccess: () => {\n        toast({\n          position: 'bottom-left',\n          render: ({ onClose }) => (\n            <ToastBox status=\"success\" onClose={onClose} message=\"Tag updated successfully\" />\n          ),\n        });\n        queryClient.invalidateQueries('tags');\n        handleGotoTags();\n      },\n      onError: (error, newData, context) => {\n        queryClient.setQueryData('tags', context.previousTags);\n        toast({\n          position: 'bottom-left',\n          render: ({ onClose }) => <ToastBox onClose={onClose} message={error.message} />,\n        });\n      },\n    },\n  );\n\n  const { isLoading: isDeleting, mutate: mutateTagDelete } = useMutation<any, AxiosError, any, any>(\n    (payload: Partial<InboxTag>) => deleteTag(payload),\n    {\n      onMutate: async payload => {\n        await queryClient.cancelQueries('tags');\n        const previousTags = queryClient.getQueryData('tags');\n        queryClient.setQueryData('tags', old => {\n          //@ts-ignore\n          return old?.filter(item => item.uuid !== payload.uuid);\n        });\n        return { previousTags };\n      },\n      onSuccess: () => {\n        toast({\n          position: 'bottom-left',\n          render: ({ onClose }) => (\n            <ToastBox status=\"success\" onClose={onClose} message=\"Tag deleted successfully\" />\n          ),\n        });\n        handleGotoTags();\n      },\n      onError: (error, newData, context) => {\n        queryClient.setQueryData('tags', context.previousTags);\n\n        toast({\n          position: 'bottom-left',\n          render: ({ onClose }) => <ToastBox onClose={onClose} message={error.message} />,\n        });\n      },\n    },\n  );\n\n  const handleEditTag = (values: Partial<InboxTag>) => {\n    mutate({ id: values.uuid, data: values });\n  };\n\n  const handleDeleteTag = () => {\n    mutateTagDelete(data.data.tag);\n  };\n\n  return (\n    <Box height=\"100%\" bg=\"white\" overflowY=\"auto\">\n      <PageBack title=\"Back to Tags\" />\n      {isLoading ? (\n        <FullPageSpinner />\n      ) : (\n        <Box maxW=\"800px\">\n          <Stack spacing=\"7rem\" flex={1} isInline>\n            <PreTitle color=\"black\">edit tag</PreTitle>\n            <Box flex={1}>\n              <TagForm\n                isLoading={isEditing}\n                isDeleting={isDeleting}\n                onSubmit={handleEditTag}\n                onCancel={handleGotoTags}\n                onDelete={handleDeleteTag}\n                initialValues={data.data.tag}\n              />\n            </Box>\n          </Stack>\n        </Box>\n      )}\n    </Box>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}