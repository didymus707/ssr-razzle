{"ast":null,"code":"import _objectSpread from \"/Users/okechukwuiheagwara/Documents/Adewale/simpu/razzle/with-typescript/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/okechukwuiheagwara/Documents/Adewale/simpu/razzle/with-typescript/src/app/authenticated-app/settings/component/teams/Teams.tsx\";\nvar __jsx = React.createElement;\nimport { Box, Heading, useDisclosure, useToast, Stack } from '@chakra-ui/core';\nimport * as React from 'react';\nimport { EmptyState, ToastBox, ConfirmModal, Button, Input } from 'app/components';\nimport noTeams from '../../assets/no-teams.svg';\nimport { TeamModal } from './TeamModal';\nimport { TeamsList } from './TeamsList';\nimport { useLoading } from '../../../../../hooks';\nimport { useSelector } from 'react-redux';\nimport { selectActiveSubscription } from '../../selectors';\nimport { useState } from 'react';\nimport noPeople from '../../assets/no-people.svg';\nexport const Teams = props => {\n  var _active_subscription$, _active_subscription$2;\n\n  const {\n    0: searchQuery,\n    1: setSearchQuery\n  } = useState('');\n  const {\n    teams,\n    match,\n    profile,\n    history,\n    addTeam,\n    editTeam,\n    removeTeam,\n    openNoSubscriptionModal\n  } = props;\n  const {\n    isOpen,\n    onOpen,\n    onClose\n  } = useDisclosure();\n  const toast = useToast();\n  const {\n    dispatch,\n    loading\n  } = useLoading();\n  const [teamToEdit, setTeamToEdit] = React.useState(null);\n  const [teamToDelete, setTeamToDelete] = React.useState(null);\n  const rows = teams.filter(i => i.name.toLowerCase().includes(searchQuery.toLowerCase()));\n\n  const handleCreateTeam = async (values, callback) => {\n    dispatch({\n      type: 'LOADING_STARTED'\n    });\n\n    try {\n      await addTeam(_objectSpread(_objectSpread({}, values), {}, {\n        organisation_id: profile === null || profile === void 0 ? void 0 : profile.organisation_id\n      }));\n      dispatch({\n        type: 'LOADING_RESOLVED'\n      });\n      callback();\n      onClose();\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          status: \"success\",\n          onClose: onClose,\n          message: \"Team created\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 11\n          }\n        })\n      });\n    } catch (error) {\n      dispatch({\n        type: 'LOADING_RESOLVED'\n      });\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          onClose: onClose,\n          message: error,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 34\n          }\n        })\n      });\n    }\n  };\n\n  const handleEditTeam = async (values, callback) => {\n    dispatch({\n      type: 'LOADING_STARTED'\n    });\n\n    try {\n      if (teamToEdit) {\n        await editTeam(values);\n        dispatch({\n          type: 'LOADING_RESOLVED'\n        });\n        callback();\n        setTeamToEdit(null);\n        toast({\n          position: 'bottom-left',\n          render: ({\n            onClose\n          }) => __jsx(ToastBox, {\n            status: \"success\",\n            onClose: onClose,\n            message: \"Team updated\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 13\n            }\n          })\n        });\n      }\n    } catch (error) {\n      dispatch({\n        type: 'LOADING_RESOLVED'\n      });\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          onClose: onClose,\n          message: error,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 34\n          }\n        })\n      });\n    }\n  };\n\n  const handleDeleteTeam = async () => {\n    dispatch({\n      type: 'LOADING_STARTED'\n    });\n\n    try {\n      await removeTeam(teamToDelete === null || teamToDelete === void 0 ? void 0 : teamToDelete.id);\n      dispatch({\n        type: 'LOADING_RESOLVED'\n      });\n      setTeamToDelete(null);\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          status: \"success\",\n          onClose: onClose,\n          message: \"Team deleted\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 11\n          }\n        })\n      });\n    } catch (error) {\n      dispatch({\n        type: 'LOADING_RESOLVED'\n      });\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          onClose: onClose,\n          message: error,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 34\n          }\n        })\n      });\n    }\n  };\n\n  const handleTeamClick = id => {\n    history.push(`${match.path}/${id}/members`);\n  };\n\n  const active_subscription = useSelector(selectActiveSubscription);\n  let allow_create = false;\n  if (!(active_subscription !== null && active_subscription !== void 0 && (_active_subscription$ = active_subscription.details) !== null && _active_subscription$ !== void 0 && (_active_subscription$2 = _active_subscription$.organization) !== null && _active_subscription$2 !== void 0 && _active_subscription$2.teams)) allow_create = true;else if (active_subscription.details.organization.teams > teams.length) allow_create = true;\n  return __jsx(Box, {\n    maxW: \"900px\",\n    margin: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 5\n    }\n  }, __jsx(Stack, {\n    isInline: true,\n    alignItems: \"center\",\n    marginBottom: \"1.5rem\",\n    justifyContent: \"space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }, __jsx(Box, {\n    display: \"flex\",\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, __jsx(Heading, {\n    size: \"sm\",\n    color: \"#333333\",\n    fontWeight: \"semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }\n  }, \"Manage Teams\"), __jsx(Box, {\n    fontWeight: \"400\",\n    color: \"#757575\",\n    fontSize: \"14px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 11\n    }\n  }, \"- \", teams.length, \" team(s)\")), __jsx(Button, {\n    variant: \"solid\",\n    variantColor: \"blue\",\n    size: \"sm\",\n    fontWeight: \"500\",\n    onClick: () => {\n      if (allow_create) onOpen();else {\n        openNoSubscriptionModal({\n          heading: \"Oops, looks like you've run out of available teams on your organization\",\n          subHeading: `Upgrade to our business plan to create unlimited teams in this organization. This organization is currently capped at a maximum of ${active_subscription.details.organization.teams} teams`\n        });\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, \"Create Team\")), __jsx(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }\n  }, __jsx(Input, {\n    placeholder: \"Search by name\",\n    size: \"sm\",\n    value: searchQuery,\n    onChange: e => setSearchQuery(e.target.value),\n    width: \"400px\",\n    autoFocus: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 9\n    }\n  })), !!teams.length ? __jsx(Box, {\n    marginTop: \"15px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  }, __jsx(Box, {\n    paddingBottom: \"1rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 11\n    }\n  }, __jsx(TeamsList, {\n    teams: rows,\n    onClick: handleTeamClick,\n    onEditTeam: setTeamToEdit,\n    onDeleteTeam: setTeamToDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }\n  }), rows.length === 0 && __jsx(EmptyState, {\n    marginY: \"10vh\",\n    image: noPeople,\n    subheading: \"No teams found in your search\",\n    subheadingProps: {\n      marginTop: '25px',\n      fontWeight: '500'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 15\n    }\n  }))) : __jsx(EmptyState, {\n    margin: \"auto\",\n    height: \"calc(100vh - 200px)\",\n    width: \"500px\",\n    image: noTeams,\n    heading: \"No teams created\",\n    subheading: \"Many separate teams can exist within one account. A team is a distinct workspace. Users can belong to single or multiple teams.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    size: \"sm\",\n    onClick: onOpen,\n    variantColor: \"blue\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 11\n    }\n  }, \"Create a team\")), __jsx(TeamModal, {\n    isOpen: isOpen,\n    onClose: onClose,\n    onSubmit: handleCreateTeam,\n    isLoading: loading === 'pending',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }\n  }), __jsx(TeamModal, {\n    title: \"Edit team\",\n    isOpen: !!teamToEdit,\n    onSubmit: handleEditTeam,\n    initialValues: teamToEdit,\n    isLoading: loading === 'pending',\n    onClose: () => setTeamToEdit(null),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }\n  }), __jsx(ConfirmModal, {\n    title: \"Delete team\",\n    isOpen: !!teamToDelete,\n    onConfirm: handleDeleteTeam,\n    isLoading: loading === 'pending',\n    onClose: () => setTeamToDelete(null),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 7\n    }\n  }));\n};","map":{"version":3,"sources":["/Users/okechukwuiheagwara/Documents/Adewale/simpu/razzle/with-typescript/src/app/authenticated-app/settings/component/teams/Teams.tsx"],"names":["Box","Heading","useDisclosure","useToast","Stack","React","EmptyState","ToastBox","ConfirmModal","Button","Input","noTeams","TeamModal","TeamsList","useLoading","useSelector","selectActiveSubscription","useState","noPeople","Teams","props","searchQuery","setSearchQuery","teams","match","profile","history","addTeam","editTeam","removeTeam","openNoSubscriptionModal","isOpen","onOpen","onClose","toast","dispatch","loading","teamToEdit","setTeamToEdit","teamToDelete","setTeamToDelete","rows","filter","i","name","toLowerCase","includes","handleCreateTeam","values","callback","type","organisation_id","position","render","error","handleEditTeam","handleDeleteTeam","id","handleTeamClick","push","path","active_subscription","allow_create","details","organization","length","heading","subHeading","e","target","value","marginTop","fontWeight"],"mappings":"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","sourcesContent":["import { Box, Heading, useDisclosure, useToast, Stack } from '@chakra-ui/core';\nimport * as React from 'react';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { EmptyState, ToastBox, ConfirmModal, Button, Input } from 'app/components';\nimport { SettingsProps } from '../../settings.container';\nimport noTeams from '../../assets/no-teams.svg';\nimport { Team } from '../../settings.types';\nimport { TeamModal } from './TeamModal';\nimport { TeamsList } from './TeamsList';\nimport { useLoading } from '../../../../../hooks';\nimport { useSelector } from 'react-redux';\nimport { selectActiveSubscription } from '../../selectors';\nimport { useState } from 'react';\nimport noPeople from '../../assets/no-people.svg';\n\nexport const Teams = (\n  props: Pick<\n    SettingsProps,\n    'profile' | 'teams' | 'addTeam' | 'editTeam' | 'removeTeam' | 'openNoSubscriptionModal'\n  > &\n    RouteComponentProps,\n) => {\n  const [searchQuery, setSearchQuery] = useState<string>('');\n  const {\n    teams,\n    match,\n    profile,\n    history,\n    addTeam,\n    editTeam,\n    removeTeam,\n    openNoSubscriptionModal,\n  } = props;\n  const { isOpen, onOpen, onClose } = useDisclosure();\n  const toast = useToast();\n\n  const { dispatch, loading } = useLoading();\n\n  const [teamToEdit, setTeamToEdit] = React.useState<Team | null>(null);\n  const [teamToDelete, setTeamToDelete] = React.useState<Team | null>(null);\n\n  const rows = teams.filter((i: any) => i.name.toLowerCase().includes(searchQuery.toLowerCase()));\n\n  const handleCreateTeam = async (values: Pick<Team, 'name' | 'color'>, callback: () => void) => {\n    dispatch({ type: 'LOADING_STARTED' });\n    try {\n      await addTeam({\n        ...values,\n        organisation_id: profile?.organisation_id,\n      });\n      dispatch({ type: 'LOADING_RESOLVED' });\n      callback();\n      onClose();\n      toast({\n        position: 'bottom-left',\n        render: ({ onClose }) => (\n          <ToastBox status=\"success\" onClose={onClose} message=\"Team created\" />\n        ),\n      });\n    } catch (error) {\n      dispatch({ type: 'LOADING_RESOLVED' });\n      toast({\n        position: 'bottom-left',\n        render: ({ onClose }) => <ToastBox onClose={onClose} message={error} />,\n      });\n    }\n  };\n\n  const handleEditTeam = async (values: Team, callback: () => void) => {\n    dispatch({ type: 'LOADING_STARTED' });\n    try {\n      if (teamToEdit) {\n        await editTeam(values);\n        dispatch({ type: 'LOADING_RESOLVED' });\n        callback();\n        setTeamToEdit(null);\n        toast({\n          position: 'bottom-left',\n          render: ({ onClose }) => (\n            <ToastBox status=\"success\" onClose={onClose} message=\"Team updated\" />\n          ),\n        });\n      }\n    } catch (error) {\n      dispatch({ type: 'LOADING_RESOLVED' });\n      toast({\n        position: 'bottom-left',\n        render: ({ onClose }) => <ToastBox onClose={onClose} message={error} />,\n      });\n    }\n  };\n\n  const handleDeleteTeam = async () => {\n    dispatch({ type: 'LOADING_STARTED' });\n    try {\n      await removeTeam(teamToDelete?.id);\n      dispatch({ type: 'LOADING_RESOLVED' });\n      setTeamToDelete(null);\n      toast({\n        position: 'bottom-left',\n        render: ({ onClose }) => (\n          <ToastBox status=\"success\" onClose={onClose} message=\"Team deleted\" />\n        ),\n      });\n    } catch (error) {\n      dispatch({ type: 'LOADING_RESOLVED' });\n      toast({\n        position: 'bottom-left',\n        render: ({ onClose }) => <ToastBox onClose={onClose} message={error} />,\n      });\n    }\n  };\n\n  const handleTeamClick = (id: Team['id']) => {\n    history.push(`${match.path}/${id}/members`);\n  };\n\n  const active_subscription: any = useSelector(selectActiveSubscription);\n  let allow_create: boolean = false;\n  if (!active_subscription?.details?.organization?.teams) allow_create = true;\n  else if (active_subscription.details.organization.teams > teams.length) allow_create = true;\n\n  return (\n    <Box maxW=\"900px\" margin=\"auto\">\n      <Stack isInline alignItems=\"center\" marginBottom=\"1.5rem\" justifyContent=\"space-between\">\n        <Box display=\"flex\" alignItems=\"center\">\n          <Heading size=\"sm\" color=\"#333333\" fontWeight=\"semibold\">\n            Manage Teams\n          </Heading>\n          <Box fontWeight=\"400\" color=\"#757575\" fontSize=\"14px\">\n            - {teams.length} team(s)\n          </Box>\n        </Box>\n\n        <Button\n          variant=\"solid\"\n          variantColor=\"blue\"\n          size=\"sm\"\n          fontWeight=\"500\"\n          onClick={() => {\n            if (allow_create) onOpen();\n            else {\n              openNoSubscriptionModal({\n                heading: \"Oops, looks like you've run out of available teams on your organization\",\n                subHeading: `Upgrade to our business plan to create unlimited teams in this organization. This organization is currently capped at a maximum of ${active_subscription.details.organization.teams} teams`,\n              });\n            }\n          }}\n        >\n          Create Team\n        </Button>\n      </Stack>\n\n      <Box display=\"flex\" flexDirection=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\n        <Input\n          placeholder=\"Search by name\"\n          size=\"sm\"\n          value={searchQuery}\n          onChange={(e: any) => setSearchQuery(e.target.value)}\n          width=\"400px\"\n          autoFocus\n        />\n      </Box>\n\n      {!!teams.length ? (\n        <Box marginTop=\"15px\">\n          <Box paddingBottom=\"1rem\">\n            <TeamsList\n              teams={rows}\n              onClick={handleTeamClick}\n              onEditTeam={setTeamToEdit}\n              onDeleteTeam={setTeamToDelete}\n            />\n\n            {rows.length === 0 && (\n              <EmptyState\n                marginY=\"10vh\"\n                image={noPeople}\n                subheading=\"No teams found in your search\"\n                subheadingProps={{ marginTop: '25px', fontWeight: '500' }}\n              />\n            )}\n          </Box>\n        </Box>\n      ) : (\n        <EmptyState\n          margin=\"auto\"\n          height=\"calc(100vh - 200px)\"\n          width=\"500px\"\n          image={noTeams}\n          heading=\"No teams created\"\n          subheading=\"Many separate teams can exist within one account. A team is a\n        distinct workspace. Users can belong to single or multiple teams.\"\n        >\n          <Button size=\"sm\" onClick={onOpen} variantColor=\"blue\">\n            Create a team\n          </Button>\n        </EmptyState>\n      )}\n\n      <TeamModal\n        isOpen={isOpen}\n        onClose={onClose}\n        onSubmit={handleCreateTeam}\n        isLoading={loading === 'pending'}\n      />\n\n      <TeamModal\n        title=\"Edit team\"\n        isOpen={!!teamToEdit}\n        onSubmit={handleEditTeam}\n        initialValues={teamToEdit}\n        isLoading={loading === 'pending'}\n        onClose={() => setTeamToEdit(null)}\n      />\n\n      <ConfirmModal\n        title=\"Delete team\"\n        isOpen={!!teamToDelete}\n        onConfirm={handleDeleteTeam}\n        isLoading={loading === 'pending'}\n        onClose={() => setTeamToDelete(null)}\n      />\n    </Box>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}