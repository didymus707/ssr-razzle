{"ast":null,"code":"var _jsxFileName = \"/Users/okechukwuiheagwara/Documents/Adewale/simpu/razzle/with-typescript/src/app/unauthenticated-app/team/team.invite.tsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Box, useToast } from '@chakra-ui/core';\nimport isEmpty from 'lodash/isEmpty';\nimport React from 'react';\nimport { useLoading } from '../../../hooks';\nimport { loadState, saveState } from '../../../utils';\nimport { sendAmplitudeData } from '../../../utils/amplitude';\nimport { acceptTeamInvite } from '../../authenticated-app/settings';\nimport { ToastBox, Button } from '../../components';\nimport Logo from '../../components/Logo';\nimport shapeTwo from './shape-2.svg';\nimport shapeOne from './shape.svg';\nimport { TeamInvitePageContainer } from './team.style';\nexport const AcceptTeamInvite = props => {\n  const {\n    match,\n    history\n  } = props;\n  const {\n    email,\n    token,\n    team_id,\n    teamName\n  } = match.params;\n  const toast = useToast();\n  const {\n    dispatch,\n    loading\n  } = useLoading();\n\n  const handleAcceptTeamInvite = async () => {\n    try {\n      dispatch({\n        type: 'LOADING_STARTED'\n      });\n      const response = await acceptTeamInvite({\n        email,\n        token,\n        team_id\n      });\n      dispatch({\n        type: 'LOADING_RESOLVED'\n      });\n      const {\n        redirect\n      } = response.data;\n      sendAmplitudeData('teamInviteAccepted');\n\n      if (redirect) {\n        if (!isEmpty(loadState())) {\n          saveState(_objectSpread(_objectSpread({}, loadState()), {}, {\n            inviteToken: token,\n            team_id\n          }));\n        } else {\n          saveState({\n            inviteToken: token,\n            team_id\n          });\n        }\n\n        history.push('/register?redirect=true');\n      } else {\n        history.push('/login');\n      }\n    } catch (error) {\n      dispatch({\n        type: 'LOADING_RESOLVED'\n      });\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          onClose: onClose,\n          message: error,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 34\n          }\n        })\n      });\n    }\n  };\n\n  return __jsx(TeamInvitePageContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"main__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }, __jsx(\"img\", {\n    src: shapeOne,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  })), __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, __jsx(\"img\", {\n    src: shapeTwo,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }))), __jsx(\"section\", {\n    id: \"subscription__intro\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"subscription__intro__bg__wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"subscription__intro__wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, __jsx(Box, {\n    marginBottom: \"1.5rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 15\n    }\n  }, __jsx(Logo, {\n    width: \"150px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  })), __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 15\n    }\n  }, \"All -in-one place to run your entire business.\"), __jsx(\"div\", {\n    className: \"other-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 15\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, \"You've been invited to join team\", ' ', decodeURIComponent(teamName.replace(/\\+/g, '%20')), \" on Simpu\")), __jsx(Button, {\n    variantColor: \"blue\",\n    loadingText: \"Accepting invite\",\n    onClick: handleAcceptTeamInvite,\n    isLoading: loading === 'pending',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  }, \"Accept invitation\"))))));\n};","map":{"version":3,"sources":["/Users/okechukwuiheagwara/Documents/Adewale/simpu/razzle/with-typescript/src/app/unauthenticated-app/team/team.invite.tsx"],"names":["Box","useToast","isEmpty","React","useLoading","loadState","saveState","sendAmplitudeData","acceptTeamInvite","ToastBox","Button","Logo","shapeTwo","shapeOne","TeamInvitePageContainer","AcceptTeamInvite","props","match","history","email","token","team_id","teamName","params","toast","dispatch","loading","handleAcceptTeamInvite","type","response","redirect","data","inviteToken","push","error","position","render","onClose","decodeURIComponent","replace"],"mappings":"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","sourcesContent":["import { Box, useToast } from '@chakra-ui/core';\nimport isEmpty from 'lodash/isEmpty';\nimport React from 'react';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { useLoading } from '../../../hooks';\nimport { loadState, saveState } from '../../../utils';\nimport { sendAmplitudeData } from '../../../utils/amplitude';\nimport { acceptTeamInvite } from '../../authenticated-app/settings';\nimport { ToastBox, Button } from '../../components';\nimport Logo from '../../components/Logo';\nimport shapeTwo from './shape-2.svg';\nimport shapeOne from './shape.svg';\nimport { TeamInvitePageContainer } from './team.style';\n\nexport const AcceptTeamInvite = (\n  props: RouteComponentProps<{\n    email: string;\n    token: string;\n    team_id: string;\n    teamName: string;\n  }>,\n) => {\n  const { match, history } = props;\n  const { email, token, team_id, teamName } = match.params;\n\n  const toast = useToast();\n  const { dispatch, loading } = useLoading();\n\n  const handleAcceptTeamInvite = async () => {\n    try {\n      dispatch({ type: 'LOADING_STARTED' });\n      const response = await acceptTeamInvite({ email, token, team_id });\n      dispatch({ type: 'LOADING_RESOLVED' });\n      const { redirect } = response.data;\n      sendAmplitudeData('teamInviteAccepted');\n\n      if (redirect) {\n        if (!isEmpty(loadState())) {\n          saveState({ ...loadState(), inviteToken: token, team_id });\n        } else {\n          saveState({ inviteToken: token, team_id });\n        }\n        history.push('/register?redirect=true');\n      } else {\n        history.push('/login');\n      }\n    } catch (error) {\n      dispatch({ type: 'LOADING_RESOLVED' });\n      toast({\n        position: 'bottom-left',\n        render: ({ onClose }) => <ToastBox onClose={onClose} message={error} />,\n      });\n    }\n  };\n\n  return (\n    <TeamInvitePageContainer>\n      <div className=\"main__header\">\n        <div>\n          <span>\n            <img src={shapeOne} alt=\"\" />\n          </span>\n          <span>\n            <img src={shapeTwo} alt=\"\" />\n          </span>\n        </div>\n        <section id=\"subscription__intro\">\n          <div className=\"subscription__intro__bg__wrapper\">\n            <div className=\"subscription__intro__wrapper\">\n              <Box marginBottom=\"1.5rem\">\n                <Logo width=\"150px\" />\n              </Box>\n              <h1>All -in-one place to run your entire business.</h1>\n              <div className=\"other-text\">\n                <p>\n                  You've been invited to join team{' '}\n                  {decodeURIComponent(teamName.replace(/\\+/g, '%20'))} on Simpu\n                </p>\n              </div>\n              <Button\n                variantColor=\"blue\"\n                loadingText=\"Accepting invite\"\n                onClick={handleAcceptTeamInvite}\n                isLoading={loading === 'pending'}\n              >\n                Accept invitation\n              </Button>\n            </div>\n          </div>\n        </section>\n      </div>\n    </TeamInvitePageContainer>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}