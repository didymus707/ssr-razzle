{"ast":null,"code":"import _objectSpread from \"/Users/public1/Documents/Projects/ssr-razzle/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _extends from \"/Users/public1/Documents/Projects/ssr-razzle/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"/Users/public1/Documents/Projects/ssr-razzle/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nconst _excluded = [\"item\", \"isOrgUser\"],\n      _excluded2 = [\"item\", \"organisation_id\", \"channel\", \"receiver_id\", \"setAttachment\", \"index\"];\nvar _jsxFileName = \"/Users/public1/Documents/Projects/ssr-razzle/src/app/authenticated-app/inbox/components/messages/Attachment.tsx\";\nvar __jsx = React.createElement;\nimport { Box, Icon, IconButton, Image, Link, Modal, ModalCloseButton, ModalContent, ModalOverlay, Stack, Text } from '@chakra-ui/core';\nimport { SmallText } from 'app/components';\nimport React, { useRef, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { buildConversationUrl } from '../../../../../utils';\nimport { selectOrganisationID } from '../../../../unauthenticated-app/authentication';\n\nfunction FileAttachment(_ref) {\n  let {\n    item,\n    isOrgUser\n  } = _ref,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  const {\n    name,\n    data: {\n      url = ''\n    } = {}\n  } = item;\n  let file_name = url.split('?');\n\n  if (file_name[0]) {\n    file_name = file_name[0].split('/');\n    file_name = file_name[file_name.length - 1];\n  }\n\n  return __jsx(Stack, {\n    px: \"1rem\",\n    py: \"1.25rem\",\n    isInline: true,\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, __jsx(Icon, {\n    name: \"inbox-mark-unread\",\n    color: \"gray.500\",\n    size: \"1.5rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }), __jsx(SmallText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, name || file_name || url.substr(0, 30)), __jsx(Link, _extends({\n    href: url,\n    width: \"40px\",\n    rounded: \"50%\",\n    height: \"40px\",\n    display: \"flex\",\n    target: \"_blank\",\n    borderWidth: \"1px\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    _focus: {\n      boxShadow: 'none'\n    },\n    _hover: {\n      textDecoration: 'none'\n    }\n  }, rest, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }), __jsx(Icon, {\n    name: \"download\",\n    color: \"gray.500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  })));\n}\n\nfunction VideoAttachment({\n  item,\n  marginTop\n}) {\n  const {\n    data: {\n      url = ''\n    } = {}\n  } = item;\n  return __jsx(\"video\", {\n    loop: true,\n    controls: true,\n    style: {\n      borderRadius: 12,\n      marginTop,\n      maxWidth: '62.54vh',\n      height: '16.75rem'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 5\n    }\n  }, __jsx(\"source\", {\n    src: url,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }), \"Your browser does not support the video tag.\");\n}\n\nfunction AudioAttachment({\n  item,\n  marginTop\n}) {\n  const {\n    data: {\n      url = ''\n    } = {}\n  } = item;\n  return __jsx(\"audio\", {\n    controls: true,\n    style: {\n      borderRadius: 12,\n      marginTop,\n      minHeight: '3.375rem'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  }, __jsx(\"source\", {\n    src: url,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }), \"Your browser does not support the audio element.\");\n}\n\nfunction ImageAttachment(_ref2) {\n  let {\n    item,\n    organisation_id,\n    channel,\n    receiver_id,\n    setAttachment,\n    index\n  } = _ref2,\n      rest = _objectWithoutProperties(_ref2, _excluded2);\n\n  const {\n    data: {\n      url = '',\n      preview_url = ''\n    } = {}\n  } = item;\n  const iUrl = ['twitter', 'gmail', 'outlook'].includes(channel) ? buildConversationUrl(`messages/attachment/${item.id}`) : preview_url || url;\n  return __jsx(Image, {\n    src: iUrl,\n    width: \"100%\",\n    height: \"30vh\",\n    border: \"none\",\n    rounded: \"12px\",\n    cursor: \"pointer\",\n    objectFit: \"cover\",\n    onClick: () => setAttachment({\n      status: true,\n      index\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 5\n    }\n  });\n}\n\nfunction ImageAttachments({\n  items,\n  organisation_id,\n  channel,\n  receiver_id,\n  isOrgUser,\n  setAttachment\n}) {\n  return items.length === 1 ? __jsx(ImageAttachment, {\n    index: 0,\n    item: items[0],\n    channel: channel,\n    receiver_id: receiver_id,\n    setAttachment: setAttachment,\n    organisation_id: organisation_id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 5\n    }\n  }) : __jsx(Stack, {\n    isInline: true,\n    spacing: \"0.1rem\",\n    flexWrap: \"wrap\",\n    flexDirection: isOrgUser ? 'row-reverse' : 'row',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 5\n    }\n  }, items.map((item, index) => __jsx(Box, {\n    mb: \"0.1rem\",\n    width: 'calc(50% - 0.1rem)',\n    key: item.data.url,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }\n  }, __jsx(ImageAttachment, {\n    item: item,\n    index: index,\n    objectFit: \"cover\",\n    channel: channel,\n    receiver_id: receiver_id,\n    setAttachment: setAttachment,\n    organisation_id: organisation_id,\n    marginTop: index >= 2 ? '1rem' : '0',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 11\n    }\n  }))));\n}\n\nfunction AttachmentViewComponent({\n  items,\n  attachment,\n  setAttachment,\n  channel,\n  organisation_id,\n  receiver_id\n}) {\n  const initialRef = useRef(null);\n\n  let View = __jsx(Text, {\n    as: \"span\",\n    backgroundColor: \"#ffffff\",\n    padding: \"1rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 5\n    }\n  }, \"Failed to load items\");\n\n  const {\n    index,\n    status\n  } = attachment;\n  const lastIndex = items.length - 1;\n  const keysPressed = {};\n\n  const handleLeftClick = () => setAttachment(_objectSpread(_objectSpread({}, attachment), {}, {\n    index: index === 0 ? 0 : index - 1\n  }));\n\n  const handleRightClick = () => setAttachment(_objectSpread(_objectSpread({}, attachment), {}, {\n    index: index === lastIndex ? lastIndex : index + 1\n  }));\n\n  const handleKeyDown = e => {\n    keysPressed[e.key] = true;\n\n    if (keysPressed['ArrowLeft']) {\n      handleLeftClick();\n    } else if (keysPressed['ArrowRight']) {\n      handleRightClick();\n    }\n  };\n\n  const handleKeyUp = v => {\n    keysPressed[v] = false;\n  };\n\n  if (items && items.length > 0) {\n    const [{\n      type\n    }] = items;\n\n    if (type === 'image') {\n      const item = items[index];\n      const {\n        data: {\n          preview_url,\n          url\n        }\n      } = item;\n      const iUrl = channel === 'twitter' ? buildConversationUrl(`messages/attachment/load/${receiver_id}?url=${preview_url || url}`) : url || preview_url;\n      View = __jsx(React.Fragment, null, __jsx(ModalContent, {\n        backgroundColor: \"transparent\",\n        boxShadow: \"none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }\n      }, __jsx(Image, {\n        ref: initialRef,\n        objectFit: \"contain\",\n        height: \"80vh\",\n        src: iUrl,\n        zIndex: 1400,\n        onKeyDown: handleKeyDown,\n        onKeyUp: e => handleKeyUp(e.key),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 13\n        }\n      })), items.length > 1 && __jsx(React.Fragment, null, __jsx(IconButton, {\n        \"aria-label\": \"navigate left\",\n        icon: \"arrow-left\",\n        zIndex: 160000,\n        position: \"absolute\",\n        top: \"50%\",\n        variant: \"ghost\",\n        variantColor: \"green\",\n        size: \"lg\",\n        marginLeft: \"1rem\",\n        display: index === 0 ? 'none' : 'inline-flex',\n        onClick: handleLeftClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 15\n        }\n      }), __jsx(IconButton, {\n        \"aria-label\": \"navigate right\",\n        icon: \"arrow-right\",\n        zIndex: 160000,\n        position: \"absolute\",\n        top: \"50%\",\n        right: \"0\",\n        variant: \"ghost\",\n        variantColor: \"green\",\n        size: \"lg\",\n        marginRight: \"1rem\",\n        display: index === lastIndex ? 'none' : 'inline-flex',\n        onClick: handleRightClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 15\n        }\n      })));\n    }\n  }\n\n  return __jsx(Modal, {\n    size: \"full\",\n    isOpen: status,\n    onClose: () => setAttachment({\n      status: false,\n      index: -1\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 5\n    }\n  }, __jsx(ModalOverlay, {\n    className: \"overlay\",\n    backgroundColor: \"rgba(40, 64, 48, 0.9)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 7\n    }\n  }), __jsx(ModalCloseButton, {\n    color: \"#fff\",\n    zIndex: 160000,\n    rounded: \"50%\",\n    size: \"sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }\n  }), View);\n}\n\nexport function Attachment({\n  isOrgUser,\n  receiver,\n  attachments\n}) {\n  const receiver_id = receiver.uuid;\n  const items = attachments;\n  const channel = (receiver === null || receiver === void 0 ? void 0 : receiver.channel_name) || '';\n  const organisation_id = useSelector(selectOrganisationID) || '';\n  const {\n    0: attachment,\n    1: setAttachment\n  } = useState({\n    status: false,\n    index: -1\n  });\n\n  if (!organisation_id || items && items.length === 0) {\n    return __jsx(Box, {\n      height: \"0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 12\n      }\n    });\n  }\n\n  const [{\n    type\n  }] = items;\n  let View = null;\n\n  if (type === 'file') {\n    View = __jsx(Stack, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 7\n      }\n    }, items.map((item, index) => __jsx(FileAttachment, {\n      item: item,\n      key: item.id,\n      isOrgUser: isOrgUser,\n      marginTop: index === 0 ? '0' : '.875rem',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 11\n      }\n    })));\n  } else if (type === 'video') {\n    View = __jsx(Stack, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 7\n      }\n    }, items.map((item, index) => __jsx(VideoAttachment, {\n      item: item,\n      key: item.id,\n      marginTop: index === 0 ? '0' : '.875rem',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 11\n      }\n    })));\n  } else if (type === 'audio') {\n    View = __jsx(Stack, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 7\n      }\n    }, items.map((item, index) => __jsx(AudioAttachment, {\n      item: item,\n      key: item.id,\n      marginTop: index === 0 ? '0' : '.875rem',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 11\n      }\n    })));\n  } else if (type === 'image') {\n    View = __jsx(ImageAttachments, {\n      items: items,\n      channel: channel,\n      isOrgUser: isOrgUser,\n      receiver_id: receiver_id,\n      organisation_id: organisation_id,\n      setAttachment: setAttachment,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 7\n      }\n    });\n  } else {\n    View = __jsx(Box, {\n      height: \"0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return __jsx(React.Fragment, null, View, attachment.status && type === 'image' && __jsx(AttachmentViewComponent, {\n    items: items,\n    channel: channel,\n    receiver_id: receiver_id,\n    organisation_id: organisation_id,\n    attachment: attachment,\n    setAttachment: setAttachment,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 9\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/public1/Documents/Projects/ssr-razzle/src/app/authenticated-app/inbox/components/messages/Attachment.tsx"],"names":["Box","Icon","IconButton","Image","Link","Modal","ModalCloseButton","ModalContent","ModalOverlay","Stack","Text","SmallText","React","useRef","useState","useSelector","buildConversationUrl","selectOrganisationID","FileAttachment","item","isOrgUser","rest","name","data","url","file_name","split","length","substr","boxShadow","textDecoration","VideoAttachment","marginTop","borderRadius","maxWidth","height","AudioAttachment","minHeight","ImageAttachment","organisation_id","channel","receiver_id","setAttachment","index","preview_url","iUrl","includes","id","status","ImageAttachments","items","map","AttachmentViewComponent","attachment","initialRef","View","lastIndex","keysPressed","handleLeftClick","handleRightClick","handleKeyDown","e","key","handleKeyUp","v","type","Attachment","receiver","attachments","uuid","channel_name"],"mappings":"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","sourcesContent":["import {\n  Box,\n  Icon,\n  IconButton,\n  Image,\n  ImageProps,\n  Link,\n  LinkProps,\n  Modal,\n  ModalCloseButton,\n  ModalContent,\n  ModalOverlay,\n  Stack,\n  Text,\n} from '@chakra-ui/core';\nimport { SmallText } from 'app/components';\nimport React, { useRef, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { buildConversationUrl } from '../../../../../utils';\nimport { selectOrganisationID } from '../../../../unauthenticated-app/authentication';\nimport { AttachmentProps } from '../../inbox.types';\n\ntype AttachmetTypeProps = {\n  item: any;\n  isOrgUser: boolean;\n};\n\ntype AttachmentSchema = {\n  index: number;\n  status: boolean;\n};\n\ntype AttachmentTypes = {\n  items: any[];\n  isOrgUser: boolean;\n  organisation_id: string;\n  channel: string;\n  receiver_id: string;\n};\n\nfunction FileAttachment({ item, isOrgUser, ...rest }: AttachmetTypeProps & LinkProps) {\n  const { name, data: { url = '' } = {} } = item;\n  let file_name = url.split('?');\n\n  if (file_name[0]) {\n    file_name = file_name[0].split('/');\n    file_name = file_name[file_name.length - 1];\n  }\n\n  return (\n    <Stack px=\"1rem\" py=\"1.25rem\" isInline alignItems=\"center\">\n      <Icon name=\"inbox-mark-unread\" color=\"gray.500\" size=\"1.5rem\" />\n      <SmallText>{name || file_name || url.substr(0, 30)}</SmallText>\n      <Link\n        href={url}\n        width=\"40px\"\n        rounded=\"50%\"\n        height=\"40px\"\n        display=\"flex\"\n        target=\"_blank\"\n        borderWidth=\"1px\"\n        alignItems=\"center\"\n        justifyContent=\"center\"\n        _focus={{ boxShadow: 'none' }}\n        _hover={{ textDecoration: 'none' }}\n        {...rest}\n      >\n        <Icon name=\"download\" color=\"gray.500\" />\n      </Link>\n    </Stack>\n  );\n}\n\nfunction VideoAttachment({\n  item,\n  marginTop,\n}: Omit<AttachmetTypeProps, 'isOrgUser'> & {\n  marginTop: string;\n}) {\n  const { data: { url = '' } = {} } = item;\n\n  return (\n    <video\n      loop\n      controls={true}\n      style={{ borderRadius: 12, marginTop, maxWidth: '62.54vh', height: '16.75rem' }}\n    >\n      <source src={url} />\n      Your browser does not support the video tag.\n    </video>\n  );\n}\n\nfunction AudioAttachment({\n  item,\n  marginTop,\n}: Omit<AttachmetTypeProps, 'isOrgUser'> & {\n  marginTop: string;\n}) {\n  const { data: { url = '' } = {} } = item;\n\n  return (\n    <audio controls style={{ borderRadius: 12, marginTop, minHeight: '3.375rem' }}>\n      <source src={url} />\n      Your browser does not support the audio element.\n    </audio>\n  );\n}\n\nfunction ImageAttachment({\n  item,\n  organisation_id,\n  channel,\n  receiver_id,\n  setAttachment,\n  index,\n  ...rest\n}: {\n  index: number;\n  item: any;\n  setAttachment: (v: AttachmentSchema) => void;\n} & Omit<AttachmentTypes, 'isOrgUser' | 'items'> &\n  ImageProps) {\n  const { data: { url = '', preview_url = '' } = {} } = item;\n  const iUrl = ['twitter', 'gmail', 'outlook'].includes(channel)\n    ? buildConversationUrl(`messages/attachment/${item.id}`)\n    : preview_url || url;\n\n  return (\n    <Image\n      src={iUrl}\n      width=\"100%\"\n      height=\"30vh\"\n      border=\"none\"\n      rounded=\"12px\"\n      cursor=\"pointer\"\n      objectFit=\"cover\"\n      onClick={() => setAttachment({ status: true, index })}\n    />\n  );\n}\n\nfunction ImageAttachments({\n  items,\n  organisation_id,\n  channel,\n  receiver_id,\n  isOrgUser,\n  setAttachment,\n}: AttachmentTypes & { setAttachment: (v: AttachmentSchema) => void }) {\n  return items.length === 1 ? (\n    <ImageAttachment\n      index={0}\n      item={items[0]}\n      channel={channel}\n      receiver_id={receiver_id}\n      setAttachment={setAttachment}\n      organisation_id={organisation_id}\n    />\n  ) : (\n    <Stack\n      isInline\n      spacing=\"0.1rem\"\n      flexWrap=\"wrap\"\n      flexDirection={isOrgUser ? 'row-reverse' : 'row'}\n    >\n      {items.map((item, index) => (\n        <Box mb=\"0.1rem\" width={'calc(50% - 0.1rem)'} key={item.data.url}>\n          <ImageAttachment\n            item={item}\n            index={index}\n            objectFit=\"cover\"\n            channel={channel}\n            receiver_id={receiver_id}\n            setAttachment={setAttachment}\n            organisation_id={organisation_id}\n            marginTop={index >= 2 ? '1rem' : '0'}\n          />\n        </Box>\n      ))}\n    </Stack>\n  );\n}\n\nfunction AttachmentViewComponent({\n  items,\n  attachment,\n  setAttachment,\n  channel,\n  organisation_id,\n  receiver_id,\n}: {\n  attachment: AttachmentSchema;\n  setAttachment: (v: AttachmentSchema) => void;\n} & Omit<AttachmentTypes, 'isOrgUser'>) {\n  const initialRef = useRef<HTMLImageElement>(null);\n  let View = (\n    <Text as=\"span\" backgroundColor=\"#ffffff\" padding=\"1rem\">\n      Failed to load items\n    </Text>\n  );\n  const { index, status } = attachment;\n  const lastIndex = items.length - 1;\n  const keysPressed: any = {};\n\n  const handleLeftClick = () =>\n    setAttachment({ ...attachment, index: index === 0 ? 0 : index - 1 });\n  const handleRightClick = () =>\n    setAttachment({ ...attachment, index: index === lastIndex ? lastIndex : index + 1 });\n\n  const handleKeyDown = (e: any) => {\n    keysPressed[e.key] = true;\n\n    if (keysPressed['ArrowLeft']) {\n      handleLeftClick();\n    } else if (keysPressed['ArrowRight']) {\n      handleRightClick();\n    }\n  };\n\n  const handleKeyUp = (v: string) => {\n    keysPressed[v] = false;\n  };\n\n  if (items && items.length > 0) {\n    const [{ type }] = items;\n\n    if (type === 'image') {\n      const item = items[index];\n      const {\n        data: { preview_url, url },\n      } = item;\n      const iUrl =\n        channel === 'twitter'\n          ? buildConversationUrl(\n              `messages/attachment/load/${receiver_id}?url=${preview_url || url}`,\n            )\n          : url || preview_url;\n\n      View = (\n        <>\n          <ModalContent backgroundColor=\"transparent\" boxShadow=\"none\">\n            <Image\n              ref={initialRef}\n              objectFit=\"contain\"\n              height=\"80vh\"\n              src={iUrl}\n              zIndex={1400}\n              onKeyDown={handleKeyDown}\n              onKeyUp={(e: any) => handleKeyUp(e.key)}\n            />\n          </ModalContent>\n\n          {items.length > 1 && (\n            <>\n              <IconButton\n                aria-label=\"navigate left\"\n                icon=\"arrow-left\"\n                zIndex={160000}\n                position=\"absolute\"\n                top=\"50%\"\n                variant=\"ghost\"\n                variantColor=\"green\"\n                size=\"lg\"\n                marginLeft=\"1rem\"\n                display={index === 0 ? 'none' : 'inline-flex'}\n                onClick={handleLeftClick}\n              />\n\n              <IconButton\n                aria-label=\"navigate right\"\n                icon=\"arrow-right\"\n                zIndex={160000}\n                position=\"absolute\"\n                top=\"50%\"\n                right=\"0\"\n                variant=\"ghost\"\n                variantColor=\"green\"\n                size=\"lg\"\n                marginRight=\"1rem\"\n                display={index === lastIndex ? 'none' : 'inline-flex'}\n                onClick={handleRightClick}\n              />\n            </>\n          )}\n        </>\n      );\n    }\n  }\n\n  return (\n    <Modal size=\"full\" isOpen={status} onClose={() => setAttachment({ status: false, index: -1 })}>\n      <ModalOverlay className=\"overlay\" backgroundColor=\"rgba(40, 64, 48, 0.9)\" />\n\n      <ModalCloseButton color=\"#fff\" zIndex={160000} rounded=\"50%\" size=\"sm\" />\n\n      {View}\n    </Modal>\n  );\n}\n\nexport function Attachment({ isOrgUser, receiver, attachments }: AttachmentProps) {\n  const receiver_id = receiver.uuid;\n  const items: any[] = attachments;\n  const channel = receiver?.channel_name || '';\n\n  const organisation_id = useSelector(selectOrganisationID) || '';\n\n  const [attachment, setAttachment] = useState({\n    status: false,\n    index: -1,\n  });\n\n  if (!organisation_id || (items && items.length === 0)) {\n    return <Box height=\"0\" />;\n  }\n\n  const [{ type }] = items;\n\n  let View = null;\n\n  if (type === 'file') {\n    View = (\n      <Stack>\n        {items.map((item, index) => (\n          <FileAttachment\n            item={item}\n            key={item.id}\n            isOrgUser={isOrgUser}\n            marginTop={index === 0 ? '0' : '.875rem'}\n          />\n        ))}\n      </Stack>\n    );\n  } else if (type === 'video') {\n    View = (\n      <Stack>\n        {items.map((item, index) => (\n          <VideoAttachment item={item} key={item.id} marginTop={index === 0 ? '0' : '.875rem'} />\n        ))}\n      </Stack>\n    );\n  } else if (type === 'audio') {\n    View = (\n      <Stack>\n        {items.map((item, index) => (\n          <AudioAttachment item={item} key={item.id} marginTop={index === 0 ? '0' : '.875rem'} />\n        ))}\n      </Stack>\n    );\n  } else if (type === 'image') {\n    View = (\n      <ImageAttachments\n        items={items}\n        channel={channel}\n        isOrgUser={isOrgUser}\n        receiver_id={receiver_id}\n        organisation_id={organisation_id}\n        setAttachment={setAttachment}\n      />\n    );\n  } else {\n    View = <Box height=\"0\" />;\n  }\n\n  return (\n    <>\n      {View}\n\n      {attachment.status && type === 'image' && (\n        <AttachmentViewComponent\n          items={items}\n          channel={channel}\n          receiver_id={receiver_id}\n          organisation_id={organisation_id}\n          attachment={attachment}\n          setAttachment={setAttachment}\n        />\n      )}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}