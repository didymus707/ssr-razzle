{"ast":null,"code":"import { getAPIKeys, revokeAPIKeyItem } from '../reducers/developers';\nimport { createAPIKey, listAPIKeys, removeAPIKey } from '../service/developers';\nexport const fetchAPIKeys = () => async dispatch => {\n  try {\n    const response = await listAPIKeys();\n    const {\n      keys\n    } = response.data;\n    dispatch(getAPIKeys({\n      keys\n    }));\n    return response.data;\n  } catch (e) {\n    return null;\n  }\n};\nexport const generateAPIKey = () => async dispatch => {\n  try {\n    const response = await createAPIKey();\n    dispatch(fetchAPIKeys());\n    return response.data;\n  } catch (e) {\n    return null;\n  }\n};\nexport const revokeAPIKey = apiKey => async dispatch => {\n  try {\n    const response = await removeAPIKey(apiKey.id);\n    const {\n      auth_key\n    } = response.data;\n    dispatch(revokeAPIKeyItem({\n      id: auth_key.id\n    }));\n    dispatch(fetchAPIKeys());\n    return response.data;\n  } catch (e) {\n    return null;\n  }\n};","map":{"version":3,"sources":["/Users/public1/Documents/Projects/ssr-razzle/src/app/authenticated-app/settings/thunks/developers.ts"],"names":["getAPIKeys","revokeAPIKeyItem","createAPIKey","listAPIKeys","removeAPIKey","fetchAPIKeys","dispatch","response","keys","data","e","generateAPIKey","revokeAPIKey","apiKey","id","auth_key"],"mappings":"AACA,SAASA,UAAT,EAAqBC,gBAArB,QAA6C,wBAA7C;AACA,SAASC,YAAT,EAAuBC,WAAvB,EAAoCC,YAApC,QAAwD,uBAAxD;AAGA,OAAO,MAAMC,YAAY,GAAG,MAAgB,MAAMC,QAAN,IAAkB;AAC5D,MAAI;AACF,UAAMC,QAAQ,GAAG,MAAMJ,WAAW,EAAlC;AACA,UAAM;AAAEK,MAAAA;AAAF,QAAWD,QAAQ,CAACE,IAA1B;AACAH,IAAAA,QAAQ,CAACN,UAAU,CAAC;AAAEQ,MAAAA;AAAF,KAAD,CAAX,CAAR;AACA,WAAOD,QAAQ,CAACE,IAAhB;AACD,GALD,CAKE,OAAOC,CAAP,EAAU;AACV,WAAO,IAAP;AACD;AACF,CATM;AAWP,OAAO,MAAMC,cAAc,GAAG,MAAgB,MAAML,QAAN,IAAkB;AAC9D,MAAI;AACF,UAAMC,QAAQ,GAAG,MAAML,YAAY,EAAnC;AACAI,IAAAA,QAAQ,CAACD,YAAY,EAAb,CAAR;AACA,WAAOE,QAAQ,CAACE,IAAhB;AACD,GAJD,CAIE,OAAOC,CAAP,EAAU;AACV,WAAO,IAAP;AACD;AACF,CARM;AAUP,OAAO,MAAME,YAAY,GAAIC,MAAD,IAA8B,MAAMP,QAAN,IAAkB;AAC1E,MAAI;AACF,UAAMC,QAAQ,GAAG,MAAMH,YAAY,CAACS,MAAM,CAACC,EAAR,CAAnC;AACA,UAAM;AAAEC,MAAAA;AAAF,QAAeR,QAAQ,CAACE,IAA9B;AACAH,IAAAA,QAAQ,CAACL,gBAAgB,CAAC;AAAEa,MAAAA,EAAE,EAAEC,QAAQ,CAACD;AAAf,KAAD,CAAjB,CAAR;AACAR,IAAAA,QAAQ,CAACD,YAAY,EAAb,CAAR;AACA,WAAOE,QAAQ,CAACE,IAAhB;AACD,GAND,CAME,OAAOC,CAAP,EAAU;AACV,WAAO,IAAP;AACD;AACF,CAVM","sourcesContent":["import { AppThunk } from '../../../../root'\nimport { getAPIKeys, revokeAPIKeyItem } from '../reducers/developers'\nimport { createAPIKey, listAPIKeys, removeAPIKey } from '../service/developers'\nimport { APIKey } from '../settings.types'\n\nexport const fetchAPIKeys = (): AppThunk => async dispatch => {\n  try {\n    const response = await listAPIKeys()\n    const { keys } = response.data\n    dispatch(getAPIKeys({ keys }))\n    return response.data\n  } catch (e) {\n    return null\n  }\n}\n\nexport const generateAPIKey = (): AppThunk => async dispatch => {\n  try {\n    const response = await createAPIKey()\n    dispatch(fetchAPIKeys())\n    return response.data\n  } catch (e) {\n    return null\n  }\n}\n\nexport const revokeAPIKey = (apiKey: APIKey): AppThunk => async dispatch => {\n  try {\n    const response = await removeAPIKey(apiKey.id)\n    const { auth_key } = response.data\n    dispatch(revokeAPIKeyItem({ id: auth_key.id }))\n    dispatch(fetchAPIKeys())\n    return response.data\n  } catch (e) {\n    return null\n  }\n}\n"]},"metadata":{},"sourceType":"module"}