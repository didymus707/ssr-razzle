{"ast":null,"code":"import _objectSpread from \"/Users/okechukwuiheagwara/Documents/Adewale/simpu/razzle/with-typescript/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/okechukwuiheagwara/Documents/Adewale/simpu/razzle/with-typescript/src/app/authenticated-app/settings/component/profile/Profile.tsx\";\nvar __jsx = React.createElement;\nimport { Box, Heading, Stack, useToast } from '@chakra-ui/core';\nimport React from 'react';\nimport { ChangePassordForm } from './ChangePasswordForm';\nimport { ProfileForm } from './ProfileForm';\nimport { ToastBox } from '../../../../components';\nimport { useLoading } from '../../../../../hooks';\nimport { Avatar } from '@chakra-ui/core/dist';\nexport function Profile(props) {\n  const toast = useToast();\n  const {\n    dispatch,\n    tableLoading: profileLoading,\n    loading: changePasswordLoading\n  } = useLoading();\n  const {\n    user,\n    profile,\n    editProfile,\n    editPassword\n  } = props;\n\n  const handleProfileUpdate = async values => {\n    dispatch({\n      type: 'TABLE_LOADING_STARTED'\n    });\n\n    try {\n      await editProfile(_objectSpread(_objectSpread({}, values), {}, {\n        user_id: user === null || user === void 0 ? void 0 : user.id,\n        organisation_id: profile === null || profile === void 0 ? void 0 : profile.organisation_id\n      }));\n      dispatch({\n        type: 'TABLE_LOADING_RESOLVED'\n      });\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          status: \"success\",\n          onClose: onClose,\n          message: \"Profile updated\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32,\n            columnNumber: 11\n          }\n        })\n      });\n    } catch (error) {\n      dispatch({\n        type: 'TABLE_LOADING_RESOLVED'\n      });\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          onClose: onClose,\n          message: error,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 39,\n            columnNumber: 34\n          }\n        })\n      });\n    }\n  };\n\n  const handleChangePassword = async (values, callback) => {\n    dispatch({\n      type: 'LOADING_STARTED'\n    });\n\n    try {\n      await editPassword(values);\n      dispatch({\n        type: 'LOADING_RESOLVED'\n      });\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          status: \"success\",\n          onClose: onClose,\n          message: \"Password changed\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 11\n          }\n        })\n      });\n      callback();\n    } catch (error) {\n      dispatch({\n        type: 'LOADING_RESOLVED'\n      });\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          onClose: onClose,\n          message: error.message,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 34\n          }\n        })\n      });\n    }\n  };\n\n  return __jsx(Box, {\n    maxW: \"900px\",\n    margin: \"auto\",\n    paddingBottom: ['5rem', '10rem', '0'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }, __jsx(Box, {\n    marginBottom: \"1.5rem\",\n    paddingBottom: \"2.5rem\",\n    borderBottom: \"1px solid rgba(0, 0, 0, 0.08)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, __jsx(Stack, {\n    isInline: true,\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, __jsx(Heading, {\n    fontWeight: \"semibold\",\n    size: \"sm\",\n    color: \"#333333\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }, \"My Settings\")), __jsx(Box, {\n    marginTop: \"2rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, __jsx(Avatar, {\n    size: \"2xl\",\n    name: `${profile === null || profile === void 0 ? void 0 : profile.first_name} ${profile === null || profile === void 0 ? void 0 : profile.last_name}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  })), __jsx(Box, {\n    marginTop: \"2rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, __jsx(ProfileForm, {\n    onSubmit: handleProfileUpdate,\n    initialValues: {\n      email: user === null || user === void 0 ? void 0 : user.email,\n      last_name: profile === null || profile === void 0 ? void 0 : profile.last_name,\n      first_name: profile === null || profile === void 0 ? void 0 : profile.first_name\n    },\n    isLoading: profileLoading === 'pending',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }))), __jsx(Box, {\n    marginBottom: \"1.5rem\",\n    paddingBottom: \"1.5rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }, __jsx(Stack, {\n    isInline: true,\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, __jsx(Heading, {\n    fontWeight: \"semibold\",\n    size: \"sm\",\n    color: \"#333333\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, \"Change Password\")), __jsx(Box, {\n    marginTop: \"1.5rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, __jsx(ChangePassordForm, {\n    onSubmit: handleChangePassword,\n    isLoading: changePasswordLoading === 'pending',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }))));\n}","map":{"version":3,"sources":["/Users/okechukwuiheagwara/Documents/Adewale/simpu/razzle/with-typescript/src/app/authenticated-app/settings/component/profile/Profile.tsx"],"names":["Box","Heading","Stack","useToast","React","ChangePassordForm","ProfileForm","ToastBox","useLoading","Avatar","Profile","props","toast","dispatch","tableLoading","profileLoading","loading","changePasswordLoading","user","profile","editProfile","editPassword","handleProfileUpdate","values","type","user_id","id","organisation_id","position","render","onClose","error","handleChangePassword","callback","message","first_name","last_name","email"],"mappings":"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","sourcesContent":["import { Box, Heading, Stack, useToast } from '@chakra-ui/core';\nimport React from 'react';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { SettingsProps } from '../../settings.container';\nimport { ChangePassordForm } from './ChangePasswordForm';\nimport { ProfileForm } from './ProfileForm';\nimport { ToastBox } from '../../../../components';\nimport { UserProfile } from '../../../../unauthenticated-app/authentication';\nimport { useLoading } from '../../../../../hooks';\nimport { Avatar } from '@chakra-ui/core/dist';\n\nexport function Profile(\n  props: Pick<SettingsProps, 'user' | 'profile' | 'editProfile' | 'editPassword'> &\n    RouteComponentProps,\n) {\n  const toast = useToast();\n  const { dispatch, tableLoading: profileLoading, loading: changePasswordLoading } = useLoading();\n  const { user, profile, editProfile, editPassword } = props;\n\n  const handleProfileUpdate = async (values: Pick<UserProfile, 'first_name' | 'last_name'>) => {\n    dispatch({ type: 'TABLE_LOADING_STARTED' });\n    try {\n      await editProfile({\n        ...values,\n        user_id: user?.id,\n        organisation_id: profile?.organisation_id,\n      });\n      dispatch({ type: 'TABLE_LOADING_RESOLVED' });\n      toast({\n        position: 'bottom-left',\n        render: ({ onClose }) => (\n          <ToastBox status=\"success\" onClose={onClose} message=\"Profile updated\" />\n        ),\n      });\n    } catch (error) {\n      dispatch({ type: 'TABLE_LOADING_RESOLVED' });\n      toast({\n        position: 'bottom-left',\n        render: ({ onClose }) => <ToastBox onClose={onClose} message={error} />,\n      });\n    }\n  };\n\n  const handleChangePassword = async (\n    values: {\n      old_password: string;\n      new_password: string;\n    },\n    callback: () => void,\n  ) => {\n    dispatch({ type: 'LOADING_STARTED' });\n    try {\n      await editPassword(values);\n      dispatch({ type: 'LOADING_RESOLVED' });\n      toast({\n        position: 'bottom-left',\n        render: ({ onClose }) => (\n          <ToastBox status=\"success\" onClose={onClose} message=\"Password changed\" />\n        ),\n      });\n      callback();\n    } catch (error) {\n      dispatch({ type: 'LOADING_RESOLVED' });\n      toast({\n        position: 'bottom-left',\n        render: ({ onClose }) => <ToastBox onClose={onClose} message={error.message} />,\n      });\n    }\n  };\n\n  return (\n    <Box maxW=\"900px\" margin=\"auto\" paddingBottom={['5rem', '10rem', '0']}>\n      <Box\n        marginBottom=\"1.5rem\"\n        paddingBottom=\"2.5rem\"\n        borderBottom=\"1px solid rgba(0, 0, 0, 0.08)\"\n      >\n        <Stack isInline alignItems=\"center\">\n          <Heading fontWeight=\"semibold\" size=\"sm\" color=\"#333333\">\n            My Settings\n          </Heading>\n        </Stack>\n\n        <Box marginTop=\"2rem\">\n          <Avatar size=\"2xl\" name={`${profile?.first_name} ${profile?.last_name}`} />\n        </Box>\n\n        <Box marginTop=\"2rem\">\n          <ProfileForm\n            onSubmit={handleProfileUpdate}\n            initialValues={{\n              email: user?.email,\n              last_name: profile?.last_name,\n              first_name: profile?.first_name,\n            }}\n            isLoading={profileLoading === 'pending'}\n          />\n        </Box>\n      </Box>\n      <Box marginBottom=\"1.5rem\" paddingBottom=\"1.5rem\">\n        <Stack isInline alignItems=\"center\">\n          <Heading fontWeight=\"semibold\" size=\"sm\" color=\"#333333\">\n            Change Password\n          </Heading>\n        </Stack>\n        <Box marginTop=\"1.5rem\">\n          <ChangePassordForm\n            onSubmit={handleChangePassword}\n            isLoading={changePasswordLoading === 'pending'}\n          />\n        </Box>\n      </Box>\n    </Box>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}