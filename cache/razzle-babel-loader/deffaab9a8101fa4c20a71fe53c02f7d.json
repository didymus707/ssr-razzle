{"ast":null,"code":"var _jsxFileName = \"/Users/public1/Documents/Projects/ssr-razzle/src/app/authenticated-app/inbox/settings/NewTag.tsx\";\nvar __jsx = React.createElement;\nimport { Box, Stack, useToast } from '@chakra-ui/core';\nimport { PreTitle, ToastBox } from 'app/components';\nimport React from 'react';\nimport { useMutation, useQueryClient } from 'react-query';\nimport { useHistory } from 'react-router';\nimport { createTag } from '../inbox.service';\nimport { PageBack, TagForm } from './component';\nexport const InboxSettingsNewTag = () => {\n  const history = useHistory();\n  const toast = useToast();\n  const queryClient = useQueryClient();\n\n  const handleGotoTags = () => history.push('/s/inbox/settings/tags');\n\n  const {\n    isLoading,\n    mutate\n  } = useMutation(payload => createTag(payload), {\n    onMutate: async data => {\n      await queryClient.cancelQueries('tags');\n      const previousTags = queryClient.getQueryData('tags'); //@ts-ignore\n\n      queryClient.setQueryData('tags', old => [...old, data]);\n      return {\n        previousTags\n      };\n    },\n    onSuccess: () => {\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          status: \"success\",\n          onClose: onClose,\n          message: \"Tag created successfully\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32,\n            columnNumber: 13\n          }\n        })\n      });\n      handleGotoTags();\n    },\n    onError: (error, newData, context) => {\n      queryClient.setQueryData('tags', context.previousTags);\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          onClose: onClose,\n          message: error.message,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 36\n          }\n        })\n      });\n    }\n  });\n\n  const handleCreateTag = values => {\n    mutate(values);\n  };\n\n  return __jsx(Box, {\n    height: \"100%\",\n    bg: \"white\",\n    overflowY: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  }, __jsx(PageBack, {\n    title: \"Back to Tags\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }), __jsx(Box, {\n    maxW: \"800px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, __jsx(Stack, {\n    spacing: \"7rem\",\n    flex: 1,\n    isInline: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, __jsx(PreTitle, {\n    color: \"black\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }, \"create tag\"), __jsx(Box, {\n    flex: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  }, __jsx(TagForm, {\n    isLoading: isLoading,\n    onSubmit: handleCreateTag,\n    onCancel: handleGotoTags,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  })))));\n};","map":{"version":3,"sources":["/Users/public1/Documents/Projects/ssr-razzle/src/app/authenticated-app/inbox/settings/NewTag.tsx"],"names":["Box","Stack","useToast","PreTitle","ToastBox","React","useMutation","useQueryClient","useHistory","createTag","PageBack","TagForm","InboxSettingsNewTag","history","toast","queryClient","handleGotoTags","push","isLoading","mutate","payload","onMutate","data","cancelQueries","previousTags","getQueryData","setQueryData","old","onSuccess","position","render","onClose","onError","error","newData","context","message","handleCreateTag","values"],"mappings":"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","sourcesContent":["import { Box, Stack, useToast } from '@chakra-ui/core';\nimport { PreTitle, ToastBox } from 'app/components';\nimport { AxiosError } from 'axios';\nimport React from 'react';\nimport { useMutation, useQueryClient } from 'react-query';\nimport { useHistory } from 'react-router';\nimport { createTag } from '../inbox.service';\nimport { InboxTag } from '../inbox.types';\nimport { PageBack, TagForm } from './component';\n\nexport const InboxSettingsNewTag = () => {\n  const history = useHistory();\n  const toast = useToast();\n  const queryClient = useQueryClient();\n\n  const handleGotoTags = () => history.push('/s/inbox/settings/tags');\n\n  const { isLoading, mutate } = useMutation<any, AxiosError, any, any>(\n    (payload: Partial<InboxTag>) => createTag(payload),\n    {\n      onMutate: async data => {\n        await queryClient.cancelQueries('tags');\n        const previousTags = queryClient.getQueryData('tags');\n        //@ts-ignore\n        queryClient.setQueryData('tags', old => [...old, data]);\n        return { previousTags };\n      },\n      onSuccess: () => {\n        toast({\n          position: 'bottom-left',\n          render: ({ onClose }) => (\n            <ToastBox status=\"success\" onClose={onClose} message=\"Tag created successfully\" />\n          ),\n        });\n        handleGotoTags();\n      },\n      onError: (error, newData, context) => {\n        queryClient.setQueryData('tags', context.previousTags);\n        toast({\n          position: 'bottom-left',\n          render: ({ onClose }) => <ToastBox onClose={onClose} message={error.message} />,\n        });\n      },\n    },\n  );\n\n  const handleCreateTag = (values: Partial<InboxTag>) => {\n    mutate(values);\n  };\n\n  return (\n    <Box height=\"100%\" bg=\"white\" overflowY=\"auto\">\n      <PageBack title=\"Back to Tags\" />\n      <Box maxW=\"800px\">\n        <Stack spacing=\"7rem\" flex={1} isInline>\n          <PreTitle color=\"black\">create tag</PreTitle>\n          <Box flex={1}>\n            <TagForm isLoading={isLoading} onSubmit={handleCreateTag} onCancel={handleGotoTags} />\n          </Box>\n        </Stack>\n      </Box>\n    </Box>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}