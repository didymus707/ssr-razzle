{"ast":null,"code":"var _jsxFileName = \"/Users/public1/Documents/Projects/ssr-razzle/src/app/authenticated-app/integrations/components/Subscription.tsx\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport { Box, Text, Flex, Stack, useToast } from '@chakra-ui/core';\nimport { SwitchWithText } from './SwitchWithText';\nimport { PayButton, ToastBox, Button } from 'app/components';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { selectProfile, selectUserEmail } from '../../../unauthenticated-app/authentication';\nimport { connectChannelAcct } from '../../channels';\nexport function Subscription({\n  buyPhone\n}) {\n  var _location$state, _location$state7;\n\n  const toast = useToast();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const email = useSelector(selectUserEmail);\n  const {\n    first_name,\n    last_name\n  } = useSelector(selectProfile) || {\n    first_name: '',\n    last_name: ''\n  };\n  const {\n    0: isYearly,\n    1: setIsYearly\n  } = useState(false);\n  const {\n    0: toggleFeatures,\n    1: setToggleFeatures\n  } = useState(false);\n  const voiceFeatures = [{\n    left: 'Unlimited calling'\n  }, {\n    left: 'Call recording'\n  }, {\n    left: 'Voicemail with transcriptions'\n  }];\n  const smsFeatures = [{\n    left: 'Unlimited texting'\n  }, {\n    left: 'Text message auto replies'\n  }];\n  const {\n    capabilities,\n    friendly_name\n  } = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.phone) || {\n    capabilities: '',\n    friendly_name: ''\n  };\n  let features = [{\n    left: 'Phone number',\n    right: friendly_name\n  }, {\n    left: 'Shared phone numbers'\n  }, {\n    left: 'Business hours'\n  }, {\n    left: 'Phone menu/IVR/Extension'\n  }, {\n    left: 'Saved Replies'\n  }];\n\n  if (capabilities.includes('SMS')) {\n    features = features.concat(smsFeatures);\n  }\n\n  if (capabilities.includes('voice')) {\n    features = features.concat(voiceFeatures);\n  }\n\n  const makePayment = async () => {\n    try {\n      var _location$state2, _location$state2$phon, _location$state3, _location$state3$useC, _location$state4, _location$state5, _location$state5$phon;\n\n      ((_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : (_location$state2$phon = _location$state2.phone) === null || _location$state2$phon === void 0 ? void 0 : _location$state2$phon.phone_number) && (await dispatch(connectChannelAcct({\n        channel: 'phone',\n        useCaseData: (_location$state3 = location.state) !== null && _location$state3 !== void 0 && (_location$state3$useC = _location$state3.useCaseData) !== null && _location$state3$useC !== void 0 && _location$state3$useC.companySize ? (_location$state4 = location.state) === null || _location$state4 === void 0 ? void 0 : _location$state4.useCaseData : undefined,\n        phone_number: true ? '+15005550006' : (_location$state5 = location.state) === null || _location$state5 === void 0 ? void 0 : (_location$state5$phon = _location$state5.phone) === null || _location$state5$phon === void 0 ? void 0 : _location$state5$phon.phone_number\n      })));\n      history.push('/s/integrations/sms-integration');\n    } catch (error) {\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          onClose: onClose,\n          message: error,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 34\n          }\n        })\n      });\n    }\n  };\n\n  useEffect(() => {\n    var _location$state6;\n\n    if (!((_location$state6 = location.state) !== null && _location$state6 !== void 0 && _location$state6.phone)) {\n      history.push('/s/integrations/phone');\n    }\n  }, [history, location.state]);\n\n  if (!((_location$state7 = location.state) !== null && _location$state7 !== void 0 && _location$state7.phone)) {\n    return __jsx(Box, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return __jsx(Box, {\n    height: \"100vh\",\n    paddingBottom: \"100px\",\n    backgroundColor: \"white\",\n    overflowY: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }\n  }, __jsx(Box, {\n    p: \"1rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, __jsx(Button, {\n    size: \"sm\",\n    variant: \"ghost\",\n    leftIcon: \"chevron-left\",\n    onClick: () => history.goBack(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, \"Back\")), __jsx(Box, {\n    paddingTop: \"3.25rem\",\n    marginX: \"auto\",\n    maxWidth: \"20.125rem\",\n    color: \"brandBlack\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, __jsx(Text, {\n    fontSize: \"1.125rem\",\n    fontWeight: 600,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, \"Subscribe to a plan\"), __jsx(Text, {\n    fontSize: \".875rem\",\n    color: \"rgba(46, 56, 77, 0.5)\",\n    marginTop: \"1rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, \"7-day trial, cancel subscription anytime.\"), __jsx(SwitchWithText, {\n    left: \"Monthly\",\n    right: \"Yearly\",\n    isRight: isYearly,\n    setIsRight: setIsYearly,\n    fontSize: \".875rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }), __jsx(Box, {\n    backgroundColor: \"rgba(0, 0, 0, 0.03)\",\n    borderRadius: \".3125rem\",\n    fontSize: \".75rem\",\n    padding: \"1.25rem 1.75rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, __jsx(Flex, {\n    alignItems: \"flex-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  }, __jsx(Text, {\n    fontSize: \"1.25rem\",\n    fontWeight: \"bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }, isYearly ? '$120' : '$10'), __jsx(Text, {\n    color: \"rgba(17, 17, 17, 0.5)\",\n    marginLeft: \".3125rem\",\n    marginBottom: \".25rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }, `/${isYearly ? 'y' : 'mo'} per user`)), __jsx(Text, {\n    color: \"rgba(17, 17, 17, 0.5)\",\n    marginTop: \".625rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 11\n    }\n  }, \"Unlimited text, calls and more\"), __jsx(Stack, {\n    marginTop: \"1.875rem\",\n    spacing: \"1.125rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }\n  }, (toggleFeatures ? features : features.slice(0, 1)).map(({\n    left,\n    right\n  }) => __jsx(Flex, {\n    key: left,\n    justifyContent: \"space-between\",\n    paddingBottom: \".625rem\",\n    borderBottom: \"dashed 1px rgba(0, 0, 0, 0.08)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 15\n    }\n  }, __jsx(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 17\n    }\n  }, left), right && __jsx(Text, {\n    color: \"#3d50df\",\n    fontWeight: 600,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 19\n    }\n  }, right))), __jsx(Flex, {\n    justifyContent: \"space-between\",\n    paddingBottom: \".625rem\",\n    borderBottom: \"dashed 1px rgba(0, 0, 0, 0.08)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  }, __jsx(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 15\n    }\n  }, toggleFeatures ? 'Available on Mobile' : 'All features'), __jsx(Button, {\n    color: \"#3d50df\",\n    fontSize: \".75rem\",\n    height: \"initial\",\n    minWidth: \"initial\",\n    padding: \"0\",\n    variant: \"unstyled\",\n    onClick: () => setToggleFeatures(!toggleFeatures),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 15\n    }\n  }, toggleFeatures ? 'Collapse' : 'View all'))), __jsx(Text, {\n    fontWeight: \"bold\",\n    fontSize: \"1rem\",\n    marginTop: \"1rem\",\n    textAlign: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 11\n    }\n  }, \"Due now $0.00\")), __jsx(PayButton, {\n    variantColor: \"blue\",\n    width: \"100%\",\n    marginTop: \"1.875rem\",\n    fontSize: \".865rem\",\n    email: email || '',\n    amount: 36000,\n    first_name: first_name,\n    last_name: last_name,\n    callback: () => makePayment(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 9\n    }\n  }, \"Start your 7-day trial\")));\n}","map":{"version":3,"sources":["/Users/public1/Documents/Projects/ssr-razzle/src/app/authenticated-app/integrations/components/Subscription.tsx"],"names":["React","useEffect","useState","Box","Text","Flex","Stack","useToast","SwitchWithText","PayButton","ToastBox","Button","useHistory","useLocation","useDispatch","useSelector","selectProfile","selectUserEmail","connectChannelAcct","Subscription","buyPhone","toast","history","dispatch","location","email","first_name","last_name","isYearly","setIsYearly","toggleFeatures","setToggleFeatures","voiceFeatures","left","smsFeatures","capabilities","friendly_name","state","phone","features","right","includes","concat","makePayment","phone_number","channel","useCaseData","companySize","undefined","push","error","position","render","onClose","goBack","slice","map"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Box, Text, Flex, Stack, useToast } from '@chakra-ui/core';\nimport { SwitchWithText } from './SwitchWithText';\nimport { SubscriptionProps, FeatureSchema, PhoneSchema } from '../integrations.type';\nimport { PayButton, ToastBox, Button } from 'app/components';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { selectProfile, selectUserEmail } from '../../../unauthenticated-app/authentication';\nimport { connectChannelAcct } from '../../channels';\n\nexport function Subscription({ buyPhone }: SubscriptionProps) {\n  const toast = useToast();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const location = useLocation<{ phone: PhoneSchema; useCaseData: any }>();\n\n  const email = useSelector(selectUserEmail);\n  const { first_name, last_name } = useSelector(selectProfile) || {\n    first_name: '',\n    last_name: '',\n  };\n\n  const [isYearly, setIsYearly] = useState(false);\n  const [toggleFeatures, setToggleFeatures] = useState(false);\n\n  const voiceFeatures: FeatureSchema[] = [\n    { left: 'Unlimited calling' },\n    { left: 'Call recording' },\n    { left: 'Voicemail with transcriptions' },\n  ];\n\n  const smsFeatures: FeatureSchema[] = [\n    { left: 'Unlimited texting' },\n    { left: 'Text message auto replies' },\n  ];\n\n  const { capabilities, friendly_name } = location.state?.phone || {\n    capabilities: '',\n    friendly_name: '',\n  };\n  let features: FeatureSchema[] = [\n    { left: 'Phone number', right: friendly_name },\n    { left: 'Shared phone numbers' },\n    { left: 'Business hours' },\n    { left: 'Phone menu/IVR/Extension' },\n    { left: 'Saved Replies' },\n  ];\n\n  if (capabilities.includes('SMS')) {\n    features = features.concat(smsFeatures);\n  }\n\n  if (capabilities.includes('voice')) {\n    features = features.concat(voiceFeatures);\n  }\n\n  const makePayment = async () => {\n    try {\n      location.state?.phone?.phone_number &&\n        (await dispatch(\n          connectChannelAcct({\n            channel: 'phone',\n            useCaseData: location.state?.useCaseData?.companySize\n              ? location.state?.useCaseData\n              : undefined,\n            phone_number:\n              process.env.NODE_ENV === 'development'\n                ? '+15005550006'\n                : location.state?.phone?.phone_number,\n          }),\n        ));\n\n      history.push('/s/integrations/sms-integration');\n    } catch (error) {\n      toast({\n        position: 'bottom-left',\n        render: ({ onClose }) => <ToastBox onClose={onClose} message={error} />,\n      });\n    }\n  };\n\n  useEffect(() => {\n    if (!location.state?.phone) {\n      history.push('/s/integrations/phone');\n    }\n  }, [history, location.state]);\n\n  if (!location.state?.phone) {\n    return <Box />;\n  }\n\n  return (\n    <Box height=\"100vh\" paddingBottom=\"100px\" backgroundColor=\"white\" overflowY=\"auto\">\n      <Box p=\"1rem\">\n        <Button size=\"sm\" variant=\"ghost\" leftIcon=\"chevron-left\" onClick={() => history.goBack()}>\n          Back\n        </Button>\n      </Box>\n      <Box paddingTop=\"3.25rem\" marginX=\"auto\" maxWidth=\"20.125rem\" color=\"brandBlack\">\n        <Text fontSize=\"1.125rem\" fontWeight={600}>\n          Subscribe to a plan\n        </Text>\n\n        <Text fontSize=\".875rem\" color=\"rgba(46, 56, 77, 0.5)\" marginTop=\"1rem\">\n          7-day trial, cancel subscription anytime.\n        </Text>\n\n        <SwitchWithText\n          left=\"Monthly\"\n          right=\"Yearly\"\n          isRight={isYearly}\n          setIsRight={setIsYearly}\n          fontSize=\".875rem\"\n        />\n\n        <Box\n          backgroundColor=\"rgba(0, 0, 0, 0.03)\"\n          borderRadius=\".3125rem\"\n          fontSize=\".75rem\"\n          padding=\"1.25rem 1.75rem\"\n        >\n          <Flex alignItems=\"flex-end\">\n            <Text fontSize=\"1.25rem\" fontWeight=\"bold\">\n              {isYearly ? '$120' : '$10'}\n            </Text>\n            <Text color=\"rgba(17, 17, 17, 0.5)\" marginLeft=\".3125rem\" marginBottom=\".25rem\">\n              {`/${isYearly ? 'y' : 'mo'} per user`}\n            </Text>\n          </Flex>\n\n          <Text color=\"rgba(17, 17, 17, 0.5)\" marginTop=\".625rem\">\n            Unlimited text, calls and more\n          </Text>\n\n          <Stack marginTop=\"1.875rem\" spacing=\"1.125rem\">\n            {(toggleFeatures ? features : features.slice(0, 1)).map(({ left, right }) => (\n              <Flex\n                key={left}\n                justifyContent=\"space-between\"\n                paddingBottom=\".625rem\"\n                borderBottom=\"dashed 1px rgba(0, 0, 0, 0.08)\"\n              >\n                <Text>{left}</Text>\n                {right && (\n                  <Text color=\"#3d50df\" fontWeight={600}>\n                    {right}\n                  </Text>\n                )}\n              </Flex>\n            ))}\n\n            <Flex\n              justifyContent=\"space-between\"\n              paddingBottom=\".625rem\"\n              borderBottom=\"dashed 1px rgba(0, 0, 0, 0.08)\"\n            >\n              <Text>{toggleFeatures ? 'Available on Mobile' : 'All features'}</Text>\n              <Button\n                color=\"#3d50df\"\n                fontSize=\".75rem\"\n                height=\"initial\"\n                minWidth=\"initial\"\n                padding=\"0\"\n                variant=\"unstyled\"\n                onClick={() => setToggleFeatures(!toggleFeatures)}\n              >\n                {toggleFeatures ? 'Collapse' : 'View all'}\n              </Button>\n            </Flex>\n          </Stack>\n\n          <Text fontWeight=\"bold\" fontSize=\"1rem\" marginTop=\"1rem\" textAlign=\"right\">\n            Due now $0.00\n          </Text>\n        </Box>\n\n        <PayButton\n          variantColor=\"blue\"\n          width=\"100%\"\n          marginTop=\"1.875rem\"\n          fontSize=\".865rem\"\n          email={email || ''}\n          amount={36000}\n          first_name={first_name}\n          last_name={last_name}\n          callback={() => makePayment()}\n        >\n          Start your 7-day trial\n        </PayButton>\n      </Box>\n    </Box>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}