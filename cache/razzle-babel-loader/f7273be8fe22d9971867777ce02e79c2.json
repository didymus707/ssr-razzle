{"ast":null,"code":"var _jsxFileName = \"/Users/okechukwuiheagwara/Documents/Adewale/simpu/razzle/with-typescript/src/app/authenticated-app/settings/component/teams/Teamates.tsx\";\nvar __jsx = React.createElement;\nimport { Avatar, Badge, Box, Divider, Flex, IconButton, Stack, Text, useDisclosure, useToast } from '@chakra-ui/core';\nimport React, { useState } from 'react';\nimport { useLoading } from '../../../../../hooks';\nimport { getZonedTime } from '../../../../../utils';\nimport { ConfirmModal, EmptyState, FullPageSpinner, ToastBox, Button, Input } from 'app/components';\nimport { AddMemberModal } from './AddMemberModal';\nimport { InviteMemberModal } from './InviteMemberModal';\nimport noPeople from '../../assets/no-people.svg';\nexport function TeamMates(props) {\n  const {\n    team,\n    match,\n    createTeamMember,\n    fetchTeamMembers,\n    onInviteTeamMembers,\n    organisationMembers,\n    deleteMemberInvite,\n    deleteTeamMember\n  } = props;\n  const [members, setMembers] = React.useState([]);\n  const [invites, setInvites] = React.useState([]);\n  const [inviteToDelete, setInviteToDelete] = React.useState(null);\n  const [memberToDelete, setMemberToDelete] = React.useState(null);\n  const {\n    0: searchQuery,\n    1: setSearchQuery\n  } = useState('');\n  const toast = useToast();\n  const {\n    isOpen,\n    onClose,\n    onOpen\n  } = useDisclosure();\n  const {\n    isOpen: addMemberModalIsOpen,\n    onOpen: onOpenAddMemberModal,\n    onClose: onCloseAddMemberModal\n  } = useDisclosure();\n  const {\n    dispatch,\n    loading,\n    globalLoading\n  } = useLoading();\n  const BASE_URL = true ? 'http://localhost:3000/' : process.env.REACT_APP_DEMO_URL;\n  React.useEffect(() => {\n    handleFetchTeamMembers(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  React.useEffect(() => {\n    var _team$invites;\n\n    setMembers(team.members);\n    setInvites((_team$invites = team.invites) === null || _team$invites === void 0 ? void 0 : _team$invites.filter(i => i.status === 'sent'));\n  }, [team]);\n\n  const handleFetchTeamMembers = async () => {\n    try {\n      dispatch({\n        type: 'GLOBAL_LOADING_STARTED'\n      });\n      await fetchTeamMembers(match.params.id);\n      dispatch({\n        type: 'GLOBAL_LOADING_RESOLVED'\n      });\n    } catch (error) {\n      dispatch({\n        type: 'GLOBAL_LOADING_RESOLVED'\n      });\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          onClose: onClose,\n          message: error,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 34\n          }\n        })\n      });\n    }\n  };\n\n  const handleMemberInvite = async (email, callback) => {\n    try {\n      const payload = {\n        email,\n        team_id: team.id,\n        link: `${BASE_URL}team/invite/{{email}}/{{token}}/{{team_id}}/{{teamName}}`\n      };\n      dispatch({\n        type: 'LOADING_STARTED'\n      });\n      await onInviteTeamMembers(payload);\n      dispatch({\n        type: 'LOADING_RESOLVED'\n      });\n      callback();\n      onClose();\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          status: \"info\",\n          onClose: onClose,\n          message: `Invite sent to ${email}`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 11\n          }\n        })\n      });\n      handleFetchTeamMembers();\n    } catch (error) {\n      dispatch({\n        type: 'LOADING_RESOLVED'\n      });\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          onClose: onClose,\n          message: error,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 34\n          }\n        })\n      });\n    }\n  };\n\n  const handleDeleteMemberInvite = async () => {\n    dispatch({\n      type: 'LOADING_STARTED'\n    });\n\n    try {\n      const payload = {\n        team_id: team === null || team === void 0 ? void 0 : team['id'],\n        inviteID: inviteToDelete === null || inviteToDelete === void 0 ? void 0 : inviteToDelete['id']\n      }; // @ts-ignore\n\n      await deleteMemberInvite(payload);\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          status: \"success\",\n          onClose: onClose,\n          message: \"Invite deleted successfully\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 11\n          }\n        })\n      });\n    } catch (error) {\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          onClose: onClose,\n          message: error,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 34\n          }\n        })\n      });\n    }\n\n    dispatch({\n      type: 'LOADING_RESOLVED'\n    });\n    setInviteToDelete(null);\n  };\n\n  const handleAddMember = async ids => {\n    try {\n      dispatch({\n        type: 'LOADING_STARTED'\n      });\n      await createTeamMember({\n        team_id: team === null || team === void 0 ? void 0 : team.id,\n        user_ids: ids\n      }); // await fet\n\n      dispatch({\n        type: 'LOADING_RESOLVED'\n      });\n      onCloseAddMemberModal();\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          status: \"success\",\n          onClose: onClose,\n          message: \"Member added\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 11\n          }\n        })\n      });\n      handleFetchTeamMembers();\n    } catch (error) {\n      dispatch({\n        type: 'LOADING_RESOLVED'\n      });\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          onClose: onClose,\n          message: error,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 34\n          }\n        })\n      });\n    }\n  };\n\n  const handleRemoveMember = async () => {\n    dispatch({\n      type: 'LOADING_STARTED'\n    });\n\n    try {\n      const payload = {\n        team_id: team === null || team === void 0 ? void 0 : team['id'],\n        memberID: memberToDelete === null || memberToDelete === void 0 ? void 0 : memberToDelete['id']\n      }; // @ts-ignore\n\n      await deleteTeamMember(payload);\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          status: \"success\",\n          onClose: onClose,\n          message: \"Team member removed successfully\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 11\n          }\n        })\n      });\n    } catch (error) {\n      toast({\n        position: 'bottom-left',\n        render: ({\n          onClose\n        }) => __jsx(ToastBox, {\n          onClose: onClose,\n          message: error,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 34\n          }\n        })\n      });\n    }\n\n    dispatch({\n      type: 'LOADING_RESOLVED'\n    });\n    setMemberToDelete(null);\n  };\n\n  const member_rows = members === null || members === void 0 ? void 0 : members.filter(i => `${i.first_name} ${i.last_name}`.includes(searchQuery));\n  const invite_rows = invites === null || invites === void 0 ? void 0 : invites.filter(i => `${i.email}`.includes(searchQuery));\n  return __jsx(Box, {\n    maxW: \"900px\",\n    margin: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 5\n    }\n  }, __jsx(Button, {\n    size: \"sm\",\n    variant: \"outline\",\n    leftIcon: \"chevron-left\",\n    onClick: () => props.history.push('/s/settings/organization/teams'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }\n  }, \"Back\"), globalLoading === 'pending' ? __jsx(FullPageSpinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 9\n    }\n  }) : __jsx(Box, {\n    height: \"100vh\",\n    marginY: \"2rem\",\n    overflowY: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 9\n    }\n  }, __jsx(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    marginBottom: \"2.5rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 11\n    }\n  }, __jsx(Stack, {\n    isInline: true,\n    spacing: 4,\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 13\n    }\n  }, __jsx(Text, {\n    color: \"#333333\",\n    fontWeight: 600,\n    fontSize: \"0.875rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 15\n    }\n  }, team.name)), __jsx(Stack, {\n    isInline: true,\n    flexWrap: \"wrap\",\n    alignItems: \"center\",\n    spacing: ['0', '0.5rem', '0.5rem', '0.5rem'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 13\n    }\n  }, __jsx(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 15\n    }\n  }, __jsx(Input, {\n    value: searchQuery,\n    onChange: e => setSearchQuery(e.target.value),\n    placeholder: \"Search teammates\",\n    marginBottom: ['0.5rem', '0', '0', '0'],\n    width: \"200px\",\n    size: \"sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 17\n    }\n  })), __jsx(Button, {\n    size: \"sm\",\n    variantColor: \"blue\",\n    onClick: onOpenAddMemberModal,\n    marginBottom: ['0.5rem', '0', '0', '0'],\n    width: ['100%', 'auto', 'auto', 'auto'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 15\n    }\n  }, \"Add to team\"), __jsx(Button, {\n    size: \"sm\",\n    variant: \"outline\",\n    onClick: onOpen,\n    variantColor: \"blue\",\n    marginBottom: ['0.5rem', '0', '0', '0'],\n    width: ['100%', 'auto', 'auto', 'auto'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 15\n    }\n  }, \"Invite member\"))), (member_rows === null || member_rows === void 0 ? void 0 : member_rows.length) === 0 && (invite_rows === null || invite_rows === void 0 ? void 0 : invite_rows.length) === 0 && __jsx(EmptyState, {\n    height: \"50vh\" // heading=\"No one is here\"\n    ,\n    subheading: \"No one is here\",\n    image: noPeople,\n    subheadingProps: {\n      marginTop: '15px',\n      fontWeight: '500'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 13\n    }\n  }), !!(invite_rows !== null && invite_rows !== void 0 && invite_rows.length) && invite_rows.map((item, index) => __jsx(Box, {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 15\n    }\n  }, __jsx(Stack, {\n    isInline: true,\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 17\n    }\n  }, __jsx(Avatar, {\n    size: \"sm\",\n    color: \"white\",\n    background: team.color,\n    name: `${item.email}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 19\n    }\n  }), __jsx(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    width: \"100%\",\n    justifyContent: \"space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 19\n    }\n  }, __jsx(Text, {\n    color: \"#333333\",\n    fontWeight: \"normal\",\n    fontSize: \"0.875rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 21\n    }\n  }, item.email), __jsx(Flex, {\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 21\n    }\n  }, __jsx(Text, {\n    color: \"#747aa5\",\n    fontWeight: \"normal\",\n    fontSize: \"0.875rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 23\n    }\n  }, getZonedTime(item.created_datetime, 'dd MMM yyyy')), __jsx(Badge, {\n    ml: \"20px\",\n    variantColor: \"orange\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 23\n    }\n  }, \"pending\"), __jsx(IconButton // @ts-ignore\n  , {\n    size: \"50px\",\n    backgroundColor: \"white\",\n    \"aria-label\": \"Delete Invite\" // @ts-ignore\n    ,\n    icon: \"trash\",\n    marginLeft: \"20px\",\n    color: \"#FE3636\",\n    onClick: () => setInviteToDelete(item),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 23\n    }\n  })))), __jsx(Divider, {\n    margin: \"0.8rem 0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 17\n    }\n  }))), member_rows === null || member_rows === void 0 ? void 0 : member_rows.map((item, index) => __jsx(Box, {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 13\n    }\n  }, __jsx(Stack, {\n    isInline: true,\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 15\n    }\n  }, __jsx(Avatar, {\n    size: \"sm\",\n    color: \"white\",\n    background: team.color,\n    name: `${item.first_name} ${item.last_name}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 17\n    }\n  }), __jsx(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    width: \"100%\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 17\n    }\n  }, __jsx(Text, {\n    color: \"#333333\",\n    fontWeight: \"normal\",\n    fontSize: \"0.875rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 19\n    }\n  }, `${item.first_name} ${item.last_name}`), __jsx(Flex, {\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 19\n    }\n  }, __jsx(IconButton // @ts-ignore\n  , {\n    size: \"sm\",\n    variant: \"ghost\",\n    variantColor: \"red\",\n    \"aria-label\": \"Remove Member\" // @ts-ignore\n    ,\n    icon: \"trash\",\n    marginLeft: \"20px\",\n    onClick: () => setMemberToDelete(item),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 21\n    }\n  })))), __jsx(Divider, {\n    margin: \"0.8rem 0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 15\n    }\n  })))), __jsx(InviteMemberModal, {\n    isOpen: isOpen,\n    onClose: onClose,\n    onSubmit: handleMemberInvite,\n    isLoading: loading === 'pending',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 7\n    }\n  }), __jsx(AddMemberModal, {\n    data: organisationMembers,\n    onSubmit: handleAddMember,\n    isOpen: addMemberModalIsOpen,\n    onClose: onCloseAddMemberModal,\n    isLoading: loading === 'pending',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 7\n    }\n  }), __jsx(ConfirmModal, {\n    title: `Delete invite (${inviteToDelete === null || inviteToDelete === void 0 ? void 0 : inviteToDelete.email})`,\n    isOpen: !!inviteToDelete,\n    onConfirm: handleDeleteMemberInvite,\n    isLoading: loading === 'pending',\n    onClose: () => setInviteToDelete(null),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 7\n    }\n  }), __jsx(ConfirmModal, {\n    title: `Remove member (${memberToDelete === null || memberToDelete === void 0 ? void 0 : memberToDelete.first_name} ${memberToDelete === null || memberToDelete === void 0 ? void 0 : memberToDelete.last_name})`,\n    isOpen: !!memberToDelete,\n    onConfirm: handleRemoveMember,\n    isLoading: loading === 'pending',\n    onClose: () => setMemberToDelete(null),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/okechukwuiheagwara/Documents/Adewale/simpu/razzle/with-typescript/src/app/authenticated-app/settings/component/teams/Teamates.tsx"],"names":["Avatar","Badge","Box","Divider","Flex","IconButton","Stack","Text","useDisclosure","useToast","React","useState","useLoading","getZonedTime","ConfirmModal","EmptyState","FullPageSpinner","ToastBox","Button","Input","AddMemberModal","InviteMemberModal","noPeople","TeamMates","props","team","match","createTeamMember","fetchTeamMembers","onInviteTeamMembers","organisationMembers","deleteMemberInvite","deleteTeamMember","members","setMembers","invites","setInvites","inviteToDelete","setInviteToDelete","memberToDelete","setMemberToDelete","searchQuery","setSearchQuery","toast","isOpen","onClose","onOpen","addMemberModalIsOpen","onOpenAddMemberModal","onCloseAddMemberModal","dispatch","loading","globalLoading","BASE_URL","process","env","REACT_APP_DEMO_URL","useEffect","handleFetchTeamMembers","filter","i","status","type","params","id","error","position","render","handleMemberInvite","email","callback","payload","team_id","link","handleDeleteMemberInvite","inviteID","handleAddMember","ids","user_ids","handleRemoveMember","memberID","member_rows","first_name","last_name","includes","invite_rows","history","push","name","e","target","value","length","marginTop","fontWeight","map","item","index","color","created_datetime"],"mappings":"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","sourcesContent":["import {\n  Avatar,\n  Badge,\n  Box,\n  Divider,\n  Flex,\n  IconButton,\n  Stack,\n  Text,\n  useDisclosure,\n  useToast,\n} from '@chakra-ui/core';\nimport React, { useState } from 'react';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { useLoading } from '../../../../../hooks';\nimport { getZonedTime } from '../../../../../utils';\nimport { ConfirmModal, EmptyState, FullPageSpinner, ToastBox, Button, Input } from 'app/components';\nimport { SettingsProps } from '../../settings.container';\nimport { Team, TeamInvite, TeamMember } from '../../settings.types';\nimport { AddMemberModal } from './AddMemberModal';\nimport { InviteMemberModal } from './InviteMemberModal';\nimport noPeople from '../../assets/no-people.svg';\n\ntype Props = Pick<\n  SettingsProps,\n  | 'team'\n  | 'fetchTeamMembers'\n  | 'createTeamMember'\n  | 'onInviteTeamMembers'\n  | 'organisationMembers'\n  | 'deleteMemberInvite'\n  | 'deleteTeamMember'\n> &\n  RouteComponentProps<{ id: string }>;\n\nexport function TeamMates(props: Props) {\n  const {\n    team,\n    match,\n    createTeamMember,\n    fetchTeamMembers,\n    onInviteTeamMembers,\n    organisationMembers,\n    deleteMemberInvite,\n    deleteTeamMember,\n  } = props;\n  const [members, setMembers] = React.useState<Team['members']>([]);\n  const [invites, setInvites] = React.useState<Team['invites']>([]);\n  const [inviteToDelete, setInviteToDelete] = React.useState<TeamInvite | null>(null);\n  const [memberToDelete, setMemberToDelete] = React.useState<TeamMember | null>(null);\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const toast = useToast();\n  const { isOpen, onClose, onOpen } = useDisclosure();\n  const {\n    isOpen: addMemberModalIsOpen,\n    onOpen: onOpenAddMemberModal,\n    onClose: onCloseAddMemberModal,\n  } = useDisclosure();\n  const { dispatch, loading, globalLoading } = useLoading();\n  const BASE_URL =\n    process.env.NODE_ENV === 'development'\n      ? 'http://localhost:3000/'\n      : process.env.REACT_APP_DEMO_URL;\n\n  React.useEffect(() => {\n    handleFetchTeamMembers();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  React.useEffect(() => {\n    setMembers(team.members);\n    setInvites(team.invites?.filter(i => i.status === 'sent'));\n  }, [team]);\n\n  const handleFetchTeamMembers = async () => {\n    try {\n      dispatch({ type: 'GLOBAL_LOADING_STARTED' });\n      await fetchTeamMembers(match.params.id);\n      dispatch({ type: 'GLOBAL_LOADING_RESOLVED' });\n    } catch (error) {\n      dispatch({ type: 'GLOBAL_LOADING_RESOLVED' });\n      toast({\n        position: 'bottom-left',\n        render: ({ onClose }) => <ToastBox onClose={onClose} message={error} />,\n      });\n    }\n  };\n\n  const handleMemberInvite = async (email: string, callback: () => void) => {\n    try {\n      const payload = {\n        email,\n        team_id: team.id,\n        link: `${BASE_URL}team/invite/{{email}}/{{token}}/{{team_id}}/{{teamName}}`,\n      };\n      dispatch({ type: 'LOADING_STARTED' });\n      await onInviteTeamMembers(payload);\n      dispatch({ type: 'LOADING_RESOLVED' });\n      callback();\n      onClose();\n      toast({\n        position: 'bottom-left',\n        render: ({ onClose }) => (\n          <ToastBox status=\"info\" onClose={onClose} message={`Invite sent to ${email}`} />\n        ),\n      });\n      handleFetchTeamMembers();\n    } catch (error) {\n      dispatch({ type: 'LOADING_RESOLVED' });\n      toast({\n        position: 'bottom-left',\n        render: ({ onClose }) => <ToastBox onClose={onClose} message={error} />,\n      });\n    }\n  };\n\n  const handleDeleteMemberInvite = async () => {\n    dispatch({ type: 'LOADING_STARTED' });\n    try {\n      const payload = {\n        team_id: team?.['id'],\n        inviteID: inviteToDelete?.['id'],\n      };\n      // @ts-ignore\n      await deleteMemberInvite(payload);\n      toast({\n        position: 'bottom-left',\n        render: ({ onClose }) => (\n          <ToastBox status=\"success\" onClose={onClose} message=\"Invite deleted successfully\" />\n        ),\n      });\n    } catch (error) {\n      toast({\n        position: 'bottom-left',\n        render: ({ onClose }) => <ToastBox onClose={onClose} message={error} />,\n      });\n    }\n    dispatch({ type: 'LOADING_RESOLVED' });\n    setInviteToDelete(null);\n  };\n\n  const handleAddMember = async (ids: TeamMember['id'][]) => {\n    try {\n      dispatch({ type: 'LOADING_STARTED' });\n      await createTeamMember({ team_id: team?.id, user_ids: ids });\n      // await fet\n      dispatch({ type: 'LOADING_RESOLVED' });\n      onCloseAddMemberModal();\n      toast({\n        position: 'bottom-left',\n        render: ({ onClose }) => (\n          <ToastBox status=\"success\" onClose={onClose} message=\"Member added\" />\n        ),\n      });\n      handleFetchTeamMembers();\n    } catch (error) {\n      dispatch({ type: 'LOADING_RESOLVED' });\n      toast({\n        position: 'bottom-left',\n        render: ({ onClose }) => <ToastBox onClose={onClose} message={error} />,\n      });\n    }\n  };\n\n  const handleRemoveMember = async () => {\n    dispatch({ type: 'LOADING_STARTED' });\n    try {\n      const payload = {\n        team_id: team?.['id'],\n        memberID: memberToDelete?.['id'],\n      };\n      // @ts-ignore\n      await deleteTeamMember(payload);\n      toast({\n        position: 'bottom-left',\n        render: ({ onClose }) => (\n          <ToastBox status=\"success\" onClose={onClose} message=\"Team member removed successfully\" />\n        ),\n      });\n    } catch (error) {\n      toast({\n        position: 'bottom-left',\n        render: ({ onClose }) => <ToastBox onClose={onClose} message={error} />,\n      });\n    }\n    dispatch({ type: 'LOADING_RESOLVED' });\n    setMemberToDelete(null);\n  };\n\n  const member_rows = members?.filter((i: any) =>\n    `${i.first_name} ${i.last_name}`.includes(searchQuery),\n  );\n\n  const invite_rows = invites?.filter((i: any) => `${i.email}`.includes(searchQuery));\n\n  return (\n    <Box maxW=\"900px\" margin=\"auto\">\n      <Button\n        size=\"sm\"\n        variant=\"outline\"\n        leftIcon=\"chevron-left\"\n        onClick={() => props.history.push('/s/settings/organization/teams')}\n      >\n        Back\n      </Button>\n      {globalLoading === 'pending' ? (\n        <FullPageSpinner />\n      ) : (\n        <Box height=\"100vh\" marginY=\"2rem\" overflowY=\"auto\">\n          <Box\n            display=\"flex\"\n            flexDirection=\"row\"\n            justifyContent=\"space-between\"\n            marginBottom=\"2.5rem\"\n          >\n            <Stack isInline spacing={4} alignItems=\"center\">\n              <Text color=\"#333333\" fontWeight={600} fontSize=\"0.875rem\">\n                {team.name}\n              </Text>\n            </Stack>\n\n            <Stack\n              isInline\n              flexWrap=\"wrap\"\n              alignItems=\"center\"\n              spacing={['0', '0.5rem', '0.5rem', '0.5rem']}\n            >\n              <Box>\n                <Input\n                  value={searchQuery}\n                  onChange={(e: any) => setSearchQuery(e.target.value)}\n                  placeholder=\"Search teammates\"\n                  marginBottom={['0.5rem', '0', '0', '0']}\n                  width=\"200px\"\n                  size=\"sm\"\n                />\n              </Box>\n\n              <Button\n                size=\"sm\"\n                variantColor=\"blue\"\n                onClick={onOpenAddMemberModal}\n                marginBottom={['0.5rem', '0', '0', '0']}\n                width={['100%', 'auto', 'auto', 'auto']}\n              >\n                Add to team\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                onClick={onOpen}\n                variantColor=\"blue\"\n                marginBottom={['0.5rem', '0', '0', '0']}\n                width={['100%', 'auto', 'auto', 'auto']}\n              >\n                Invite member\n              </Button>\n            </Stack>\n          </Box>\n\n          {member_rows?.length === 0 && invite_rows?.length === 0 && (\n            <EmptyState\n              height=\"50vh\"\n              // heading=\"No one is here\"\n              subheading=\"No one is here\"\n              image={noPeople}\n              subheadingProps={{ marginTop: '15px', fontWeight: '500' }}\n            />\n          )}\n          {!!invite_rows?.length &&\n            invite_rows.map((item, index) => (\n              <Box key={index}>\n                <Stack isInline alignItems=\"center\">\n                  <Avatar size=\"sm\" color=\"white\" background={team.color} name={`${item.email}`} />\n                  <Box\n                    display=\"flex\"\n                    flexDirection=\"row\"\n                    width=\"100%\"\n                    justifyContent=\"space-between\"\n                  >\n                    <Text color=\"#333333\" fontWeight=\"normal\" fontSize=\"0.875rem\">\n                      {item.email}\n                    </Text>\n                    <Flex alignItems=\"center\">\n                      <Text color=\"#747aa5\" fontWeight=\"normal\" fontSize=\"0.875rem\">\n                        {getZonedTime(item.created_datetime, 'dd MMM yyyy')}\n                      </Text>\n                      <Badge ml=\"20px\" variantColor=\"orange\">\n                        pending\n                      </Badge>\n                      <IconButton\n                        // @ts-ignore\n                        size=\"50px\"\n                        backgroundColor=\"white\"\n                        aria-label=\"Delete Invite\"\n                        // @ts-ignore\n                        icon=\"trash\"\n                        marginLeft=\"20px\"\n                        color=\"#FE3636\"\n                        onClick={() => setInviteToDelete(item)}\n                      />\n                    </Flex>\n                  </Box>\n                </Stack>\n                <Divider margin=\"0.8rem 0\" />\n              </Box>\n            ))}\n\n          {member_rows?.map((item: any, index) => (\n            <Box key={index}>\n              <Stack isInline alignItems=\"center\">\n                <Avatar\n                  size=\"sm\"\n                  color=\"white\"\n                  background={team.color}\n                  name={`${item.first_name} ${item.last_name}`}\n                />\n                <Box\n                  display=\"flex\"\n                  flexDirection=\"row\"\n                  width=\"100%\"\n                  justifyContent=\"space-between\"\n                  alignItems=\"center\"\n                >\n                  <Text color=\"#333333\" fontWeight=\"normal\" fontSize=\"0.875rem\">\n                    {`${item.first_name} ${item.last_name}`}\n                  </Text>\n                  <Flex alignItems=\"center\">\n                    <IconButton\n                      // @ts-ignore\n                      size=\"sm\"\n                      variant=\"ghost\"\n                      variantColor=\"red\"\n                      aria-label=\"Remove Member\"\n                      // @ts-ignore\n                      icon=\"trash\"\n                      marginLeft=\"20px\"\n                      onClick={() => setMemberToDelete(item)}\n                    />\n                  </Flex>\n                </Box>\n              </Stack>\n              <Divider margin=\"0.8rem 0\" />\n            </Box>\n          ))}\n        </Box>\n      )}\n\n      <InviteMemberModal\n        isOpen={isOpen}\n        onClose={onClose}\n        onSubmit={handleMemberInvite}\n        isLoading={loading === 'pending'}\n      />\n      <AddMemberModal\n        data={organisationMembers}\n        onSubmit={handleAddMember}\n        isOpen={addMemberModalIsOpen}\n        onClose={onCloseAddMemberModal}\n        isLoading={loading === 'pending'}\n      />\n      <ConfirmModal\n        title={`Delete invite (${inviteToDelete?.email})`}\n        isOpen={!!inviteToDelete}\n        onConfirm={handleDeleteMemberInvite}\n        isLoading={loading === 'pending'}\n        onClose={() => setInviteToDelete(null)}\n      />\n      <ConfirmModal\n        title={`Remove member (${memberToDelete?.first_name} ${memberToDelete?.last_name})`}\n        isOpen={!!memberToDelete}\n        onConfirm={handleRemoveMember}\n        isLoading={loading === 'pending'}\n        onClose={() => setMemberToDelete(null)}\n      />\n    </Box>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}